<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seguridad Privada Chile</title>
    <!-- Favicon de ejemplo para evitar errores 404 -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext x='50%25' y='50%25' font-size='90' text-anchor='middle' dominant-baseline='central'%3E%F0%9F%9B%A1%3C/text%3E%3C/svg%3E" type="image/svg+xml">
    <!-- Google Fonts: Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <style>
        /* Estilos Base */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f8f8;
            color: #333;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .background-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(3px);
            -webkit-backdrop-filter: blur(3px);
            z-index: -1;
        }

        /* Navbar */
        .navbar-custom {
            background-color: rgba(23, 27, 74, 0.9);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            transition: all 0.3s ease-in-out;
            padding: 0.8rem 3%; /* Reducido de 1rem a 0.8rem para hacer banner menos grueso */
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .navbar-custom .navbar-brand {
            font-weight: 700;
            color: #ffffff;
            transition: font-size 0.3s ease-in-out;
            margin-right: 0;
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }

        /* Estilos base para el texto del banner */
        .navbar-brand .brand-text {
            font-size: 1.2rem !important; /* Forzar con !important */
            line-height: 1.2 !important;
            text-transform: uppercase !important;
            font-weight: 700 !important;
            letter-spacing: 1px !important;
        }

        /* Estilos Base del Logo */
        .navbar-brand .navbar-logo {
            height: 55px !important; /* Tamaño específico para PC: 55px */
            width: auto !important;
            margin-left: 15px !important; /* Margen proporcional */
            order: 1;
            display: inline-block !important;
        }

        .navbar-custom .nav-link {
            color: #ffffff !important;
            font-weight: 600;
            position: relative;
            text-decoration: none;
            transition: color 0.3s ease-in-out, text-decoration 0.3s ease-in-out;
            padding: 0.5rem 1rem;
            margin-left: 10px;
            border-radius: 5px;
        }

        .navbar-custom .nav-link:hover {
            color: #b2b6dc !important;
        }

        .navbar-custom .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: #b2b6dc;
            transition: width 0.3s ease-in-out;
        }

        .navbar-custom .nav-link:hover::after {
            width: 80%;
        }

        .navbar-shrink {
            padding: 0.4rem 3%; /* Reducido de 0.5rem a 0.4rem para banner encogido aún más delgado */
            box-shadow: 0 0 15px rgba(0,0,0,0.4);
            background-color: rgba(23, 27, 74, 0.95);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .navbar-shrink .navbar-brand {
            font-size: 1.2rem;
        }

        .search-toggler {
            background-color: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 0.5rem 0.8rem;
            transition: all 0.3s ease-in-out;
            margin-left: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-toggler:hover {
            transform: scale(1.08);
            background-color: rgba(255, 255, 255, 0.2);
        }

        .search-toggler i {
            color: #ffffff;
            font-size: 1.2rem;
        }

        .search-bar-container {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: #171b4a;
            padding: 10px 3%;
            box-shadow: 0 5px 10px rgba(0,0,0,0.3);
            display: none;
            z-index: 1000;
        }

        .search-bar-container.show {
            display: block;
        }

        .search-bar-container input {
            width: 100%;
            border-radius: 20px;
            border: 1px solid #333;
            padding: 8px;
            font-family: 'Poppins', sans-serif;
            background-color: #f0f0f0;
            color: #333;
        }

        .search-bar-container input::placeholder {
            color: #666;
        }

        .contact-btn {
            background-color: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 0.5rem 0.8rem;
            transition: all 0.3s ease-in-out;
            margin-left: 10px;
        }

        .contact-btn:hover {
            transform: scale(1.08);
            background-color: rgba(255, 255, 255, 0.2);
        }

        .contact-btn i {
            color: #ffffff;
            font-size: 1.2rem;
        }

        .navbar-toggler {
            border: none;
            border-radius: 0;
            padding: 0;
            background-color: transparent;
        }

        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255,255,255,1%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
            width: 1.5em;
            height: 1.5em;
        }

        /* Contenido Principal */
        .main-content {
            flex-grow: 1;
            padding: 20px 8%;
            text-align: justify;
            line-height: 1.6;
            color: #333;
            min-width: 0;
            padding-top: 100px;
        }

        .info-section {
            background-color: rgba(255, 255, 255, 0.7);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid transparent;
            box-shadow: 0 4px 16px rgba(0,0,0,0.15), 0 2px 8px rgba(0,0,0,0.10); /* Sombra más marcada */
            margin-bottom: 40px;
            text-align: center;
            position: relative;
            transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }

        .info-section:hover {
            border-color: #dc3545;
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4), 0 0 15px rgba(220, 53, 69, 0.6);
        }

        #exam-section:hover {
            border-color: #dc3545;
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4), 0 0 15px rgba(220, 53, 69, 0.6);
        }

        #exam-section.active-red-border {
            border-color: #dc3545;
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.6), 0 0 20px rgba(220, 53, 69, 0.8);
        }

        .main-content h1, .main-content h2, .main-content h3,
        .main-content h4, .main-content h5, .main-content h6 {
            font-weight: 700;
            font-size: 2.0rem;
            margin-top: 1.7em;
            margin-bottom: 0.8em;
            text-align: center;
            color: #283593;
        }

        .main-content .exam-heading-green {
            color: #28a745;
        }

        .main-content p {
            margin-bottom: 1.5em;
        }

        .main-content a {
            font-weight: bold;
            color: #283593;
            text-decoration: none;
            position: relative;
            transition: color 0.3s ease-in-out;
        }

        .main-content a:hover {
            color: #515ba6;
            text-decoration: underline;
        }

        .main-content img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .image-caption {
            text-align: center;
            font-size: 0.9em;
            color: #555;
            margin-top: 5px;
            margin-bottom: 20px;
        }

        .main-content ul {
            list-style: none;
            padding-left: 0;
            text-align: left;
        }

        .main-content ul li::before {
            content: "\2023";
            font-size: 1em;
            color: #283593;
            position: absolute;
            left: 0;
            top: 0.1em;
        }

        .main-content blockquote {
            background-color: rgba(40, 53, 147, 0.1);
            border-left: 5px solid #283593;
            margin: 20px 0;
            padding: 15px 20px;
            border-radius: 8px;
            font-style: italic;
            color: #515ba6;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            max-width: 100%;
        }

        .video-container iframe,
        .video-container object,
        .video-container embed {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }

        .icon-small {
            font-size: 0.9em;
            vertical-align: middle;
            margin-right: 5px;
            color: #283593;
        }

        #dynamic-install-banner {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #283593;
            color: white;
            font-weight: bold;
            padding: 20px;
            text-align: center;
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        #dynamic-install-banner button {
            margin-left: 10px;
            padding: 8px 16px;
            background: #e8eaf6;
            color: #283593;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s ease, transform 0.2s ease;
        }

        #dynamic-install-banner button:hover {
            background-color: #c5cae9;
            transform: translateY(-1px);
        }

        .footer {
            text-align: center;
            padding: 20px;
            background-color: #171b4a;
            color: #f8f8f8;
            font-size: 0.9em;
            margin-top: 50px;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.3);
        }

        /* Estilos del Examen */
        #exam-section {
            background-color: rgba(255, 255, 255, 0.7);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid transparent;
            box-shadow: 0 4px 16px rgba(0,0,0,0.15), 0 2px 8px rgba(0,0,0,0.10); /* Sombra más marcada */
            margin-bottom: 40px;
            text-align: center;
            position: relative;
            transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            min-height: 500px;
        }

        #start-exam-btn {
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            margin-top: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            animation: jump 0.6s infinite alternate;
        }

        #start-exam-btn:hover {
            background-color: #c82333;
            transform: translateY(-3px);
            animation: none;
        }

        @keyframes jump {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(-10px);
            }
        }

        #quiz-container {
            text-align: left;
        }

        .question-card {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            border: 1px solid rgba(0,0,0,0.05);
            box-shadow: 0 3px 8px rgba(0,0,0,0.12), 0 2px 4px rgba(0,0,0,0.08); /* Sombra más marcada */
            transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }

        .question-card h5 {
            color: #333;
            font-weight: 700;
            font-size: 1.1em;
            text-align: justify;
            margin-bottom: 15px;
        }
        
        .option-button {
            display: inline-block;
            background-color: #f0f0f0;
            color: #333;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-align: center;
            user-select: none;
        }

        .option-button:hover {
            background-color: #e0e0e0;
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            background-color: #283593;
            color: white;
            border-color: #283593;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .option-button.correct {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }

        .option-button.incorrect {
            background-color: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        .question-card.answered-blue-border {
            border-color: #2196f3;
            box-shadow: 0 2px 8px rgba(33, 150, 243, 0.4);
        }

        .form-check-input[type="radio"] {
            display: none;
        }

        .form-check-label.option-button {
            width: auto;
        }

        .exam-controls {
            text-align: center;
            margin-top: 30px;
        }

        .exam-controls button {
            background-color: #283593;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .exam-controls button:hover {
            background-color: #1a237e;
            transform: translateY(-2px);
        }

        #exam-results {
            background-color: rgba(40, 53, 147, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: none;
            border: 1px solid rgba(40,53,147,0.5);
            color: #e8eaf6;
        }

        #exam-results h3 {
            color: #e8eaf6;
        }

        #exam-results p {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1a237e;
            animation: pulse-grade 4s infinite;
        }

        @keyframes pulse-grade {
            0% { transform: scale(1); opacity: 1; text-shadow: 0 0 0px rgba(255, 255, 255, 0); }
            50% { transform: scale(1.05); opacity: 0.9; text-shadow: 0 0 10px rgba(255, 255, 255, 0.8); }
            100% { transform: scale(1); opacity: 1; text-shadow: 0 0 0px rgba(255, 255, 255, 0); }
        }

        .subtle-response-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(220, 53, 69, 0.2);
            color: #dc3545;
            padding: 15px 25px;
            border-radius: 8px;
            font-weight: 600;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
            z-index: 10;
            pointer-events: none;
        }

        .subtle-response-box.show {
            opacity: 1;
            visibility: visible;
        }

        /* Modal de resultados */
        #results-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }

        #results-modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        #results-modal-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            text-align: center;
            max-width: 90%;
            width: 500px;
            position: relative;
            transform: translateY(-50px);
            transition: transform 0.3s ease-out;
        }

        #results-modal-overlay.show #results-modal-content {
            transform: translateY(0);
        }

        #results-modal-content.pass {
            background-color: rgba(40, 167, 69, 0.9);
            color: white;
        }

        #results-modal-content.fail {
            background-color: rgba(220, 53, 69, 0.9);
            color: white;
        }

        #results-modal-content h3 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        #results-modal-content p {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        #results-modal-content #modal-grade {
            font-size: 4rem;
            font-weight: 900;
            color: inherit;
            animation: pulse-modal-grade 1.5s infinite alternate;
        }

        @keyframes pulse-modal-grade {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.1); opacity: 0.9; }
        }

        #results-modal-content button {
            margin-top: 20px;
            background-color: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.5);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        #results-modal-content button:hover {
            background-color: rgba(255, 255, 255, 0.4);
            border-color: rgba(255, 255, 255, 0.8);
        }

        /* Spinner */
        .spinner-border {
            display: inline-block;
            width: 2rem;
            height: 2rem;
            vertical-align: -0.125em;
            border: 0.25em solid currentColor;
            border-right-color: transparent;
            border-radius: 50%;
            -webkit-animation: .75s linear infinite spinner-border;
            animation: .75s linear infinite spinner-border;
            color: #dc3545;
        }

        @-webkit-keyframes spinner-border {
            to { -webkit-transform: rotate(360deg); transform: rotate(360deg); }
        }

        @keyframes spinner-border {
            to { -webkit-transform: rotate(360deg); transform: rotate(360deg); }
        }

        /* Estilo del chat flotante de IA */
        #ai-clarifier-chat {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            height: 450px;
            background-color: #b3e5fc;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            display: none;
            flex-direction: column;
            justify-content: space-between;
            z-index: 1060;
            transition: all 0.3s ease-in-out;
            border: 1px solid rgba(0,0,0,0.1);
            color: #333;
        }

        #ai-clarifier-chat.show {
            display: flex;
        }

        #ai-clarifier-chat .chat-header {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            position: relative;
        }

        #ai-clarifier-chat .chat-header h2 {
            font-size: 1.0rem;
            margin: 0;
            color: #283593;
            margin-right: 10px;
        }

        #ai-clarifier-chat .chat-header .close-button {
            position: absolute;
            top: -5px;
            right: 0px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #555;
            cursor: pointer;
            padding: 0;
        }

        #ai-clarifier-chat .chat-header .close-button:hover {
            color: #000;
        }

        #ai-clarifier-chat .chat-content {
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 5px;
            margin-bottom: 15px;
        }

        #ai-clarifier-chat .chat-content p {
            font-size: 0.9rem;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        #ai-clarifier-chat textarea {
            width: 100%;
            height: 80px;
            border-radius: 8px;
            border: 1px solid #ccc;
            padding: 8px;
            font-family: 'Poppins', sans-serif;
            resize: vertical;
            margin-bottom: 10px;
            background-color: #fff;
            color: #333;
        }

        #ai-clarifier-chat textarea::placeholder {
            color: #aaa;
        }

        #ai-clarifier-chat button {
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            width: 100%;
        }

        #ai-clarifier-chat button:hover {
            background-color: #c82333;
            transform: translateY(-2px);
        }

        #ai-clarifier-chat #ai-clarifier-response {
            background-color: #ffffff;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid #eee;
            white-space: pre-wrap;
            color: #283593;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        #ai-clarifier-chat .gemini-logo {
            width: 40px;
            height: auto;
            vertical-align: middle;
            margin-top: -5px;
        }

        /* Estilo del botón flotante de IA */
        #floating-ai-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #00bcd4;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            cursor: pointer;
            z-index: 1061;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            text-decoration: none;
        }

        #floating-ai-button:hover {
            background-color: #0097a7;
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.5);
        }

        /* Responsive para el chat flotante */
        @media (max-width: 768px) {
            #ai-clarifier-chat {
                width: 90%;
                height: 50vh;
                left: 5%;
                right: 5%;
                bottom: 15px;
                padding: 15px;
            }

            #floating-ai-button {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
                bottom: 15px;
                right: 15px;
                display: flex;
            }
        }

        @media (min-width: 769px) {
            #ai-clarifier-chat {
                position: fixed;
                bottom: 20px;
                right: 20px;
                width: 350px;
                height: 450px;
                display: none;
            }
            #ai-clarifier-chat .chat-header h2 {
                font-size: 1.0rem;
            }

            #floating-ai-button {
                display: flex;
            }
        }
        @media (max-width: 768px) {
            .navbar-custom {
                padding: 1rem 5%;
            }
            .navbar-custom .navbar-brand {
                font-size: 1.5rem;
                margin-right: 0;
            }
            .navbar-brand .navbar-logo {
                height: 85px; /* Aumentado de 65px a 85px para móvil */
                margin-left: 20px; /* Aumentado margen */
                margin-right: 0px;
            }
            .navbar-custom .navbar-collapse {
                background-color: #171b4a;
                padding: 10px;
                border-radius: 8px;
                margin-top: 10px;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                backdrop-filter: blur(5px);
                -webkit-backdrop-filter: blur(5px);
            }
            .navbar-custom .nav-link {
                text-align: center;
                margin: 5px 0;
            }
            .navbar-custom .nav-link::after {
                width: 50%;
            }
            .main-content {
                padding: 15px 2%;
                padding-top: 90px;
            }
            .main-content h1, .main-content h2, .main-content h3,
            .main-content h4, .main-content h5, .main-content h6 {
                font-size: 1.5rem;
            }
            #dynamic-install-banner {
                display: flex;
            }
            #dynamic-install-banner p {
                font-size: 1rem;
                margin-bottom: 10px;
            }
            #dynamic-install-banner button {
                padding: 8px 15px;
            }
            .question-card h5 {
                font-size: 0.9em;
            }
            .form-check-label.option-button {
                font-size: 0.8em;
            }

            #results-modal-content {
                max-width: 95%;
                width: auto;
                padding: 20px;
            }
            #results-modal-content h3 {
                font-size: 2rem;
            }
            #results-modal-content #modal-grade {
                font-size: 3rem;
            }
            #results-modal-content p {
                font-size: 1rem;
            }
        }

        @media (min-width: 769px) {
            body {
                flex-direction: column;
            }
            .content-container {
                display: block;
                width: 100%;
            }
            .main-content {
                width: auto;
                padding-right: 8%;
            }
            #dynamic-install-banner {
                display: none !important;
            }

            .navbar-custom .navbar-brand {
                font-size: 2.8rem; /* Aumentado de 2.2rem a 2.8rem para PC */
                flex-direction: row;
                white-space: nowrap;
                align-items: center;
                font-weight: 900; /* Más grueso en PC */
            }
            .navbar-brand .brand-text {
                display: inline;
                letter-spacing: 2px; /* Aumentado de 1px a 2px */
            }
            .navbar-brand .navbar-logo {
                height: 95px; /* Aumentado de 75px a 95px para PC */
                margin-left: 25px; /* Aumentado margen */
            }
            .mobile-only {
                display: none;
            }
        }
// CSS adicional para los badges de categoría (agregar al <style> del HTML)
const additionalCSS = `
.category-badge {
    font-size: 0.75rem;
    padding: 4px 8px;
    border-radius: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.category-badge-container {
    display: flex;
    justify-content: flex-start;
}

.bg-purple {
    background-color: #6f42c1 !important;
    color: white !important;
}

.category-breakdown {
    text-align: left;
    border-top: 1px solid rgba(255,255,255,0.3);
    padding-top: 15px;
    margin-top: 15px;
}

.category-stat {
    padding: 2px 0;
    font-size: 0.9rem;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    margin-bottom: 3px;
}

.category-breakdown h6 {
    color: inherit;
    font-size: 1rem;
    margin-bottom: 10px;
    text-decoration: underline;
}

@media (max-width: 768px) {
    .category-badge {
        font-size: 0.65rem;
        padding: 2px 6px;
    }
    
    .category-stat {
        font-size: 0.8rem;
    }
}
;
   
    </style>
</head>
<body>

    <div class="background-overlay"></div>

    <nav class="navbar navbar-expand-lg navbar-custom fixed-top" id="mainNavbar">
        <div class="container-fluid px-3">
            <a class="navbar-brand" href="#">
                <span class="brand-text">SEGURIDAD <br class="mobile-only">PRIVADA</span>
                <img src="logoSec.png" alt="Logo Seguridad Privada" class="navbar-logo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#exam-section">Examen OS-10</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#interes">Links de Interés</a>
                    </li>
                    <li class="nav-item d-flex align-items-center">
                        <button class="search-toggler" id="searchToggle">
                            <i class="bi bi-search"></i>
                        </button>
                    </li>
                    <li class="nav-item d-flex align-items-center">
                        <a class="contact-btn" href="#contacto">
                            <i class="bi bi-person"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="search-bar-container" id="searchBar">
            <input type="text" placeholder="Buscar en la página..." aria-label="Search">
        </div>
    </nav>

    <div class="main-content">
        <h1 class="text-center">¡Bienvenido a la Plataforma de Seguridad Privada en Chile!</h1>
        <p>Esta plataforma ha sido diseñada para ofrecerte información relevante y actualizada sobre la normativa de seguridad privada en Chile, incluyendo la nueva Ley 21.659, decretos complementarios y material de estudio esencial para guardias de seguridad y vigilantes privados. Nuestro objetivo es ayudarte a comprender mejor tus responsabilidades y derechos en esta importante labor, promoviendo la excelencia y el cumplimiento normativo.</p>

        <section id="exam-section" class="mt-5">
            <h2 class="text-center exam-heading-green">Examen de Preparación OS-10</h2>
            <p class="text-center">Pon a prueba tus conocimientos sobre la normativa de seguridad privada y las funciones del guardia. ¡Obtén tu calificación en escala del 1 al 7, basada en el curso OS-10!</p>
            <p class="text-center" style="color: #dc3545; font-weight: 600; font-size: 0.9rem;">
                <i class="bi bi-exclamation-triangle"></i> 
                <strong>IMPORTANTE:</strong> Este examen consta de 30 preguntas. Una vez que selecciones una respuesta, no podrás cambiarla. Lee cuidadosamente antes de responder.
            </p>
            
            <button id="start-exam-btn" class="mb-4">Empezar Examen Ahora</button>

            <div id="quiz-container" class="mt-4" style="display: none;">
                <p class="text-center text-info">Cargando preguntas del examen...</p>
            </div>
            <div class="exam-controls">
                <button id="submit-quiz-btn" style="display: none;">Enviar Examen</button>
            </div>
            <div id="subtle-response-box" class="subtle-response-box">
                ¡El examen está listo para comenzar!
            </div>
        </section>

        <section class="info-section">
            <h2 id="interes">Links de Interés</h2>
            <p>Aquí encontrarás enlaces a recursos útiles para complementar tu conocimiento y formación en seguridad privada.</p>
            <ul>
                <li><i class="icon-small bi bi-link"></i> <a href="https://www.dt.gob.cl/" target="_blank">Dirección del Trabajo</a></li>
                <li><i class="icon-small bi bi-link"></i> <a href="https://www.zosepcar.cl/OS10.php" target="_blank">Zosepcar OS-10</a></li>
                <li><i class="icon-small bi bi-link"></i> <a href="https://dal5.short.gy/CFil" target="_blank">Cerofilas</a></li>
                <li><i class="icon-small bi bi-link"></i> <a href="https://www.bcn.cl/leychile/navegar?idNorma=1200633" target="_blank">Decreto 32 Exento</a></li>
                <li><i class="icon-small bi bi-link"></i> <a href="https://dal5.short.gy/LeySeg" target="_blank">LEY 21.659 - Ministerio del Interior y Seguridad Pública</a></li>
            </ul>

            <h3>Videos Educativos</h3>
            <p>Explora videos tutoriales y explicaciones sobre procedimientos y normativas de seguridad privada.</p>
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/rfJQ1bVuTKk" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </section>

        <!-- Nueva sección para el Asistente de Redacción de Informes -->
        <section id="report-assistant-section" class="info-section mt-5">
            <h2 class="text-center">Asistente de Redacción de Informes y Comunicaciones ✨</h2>
            <p class="text-center">Describe brevemente el incidente o la situación, y la IA te ayudará a redactar un borrador de informe o comunicación profesional.</p>
            
            <div class="mb-3 text-center">
                <img src="gemini.png" alt="Logo de Gemini IA" class="gemini-logo" style="width: 60px; height: auto;">
            </div>

            <textarea id="incident-description-input" class="form-control mb-3" rows="5" placeholder="Ej: Hubo un hurto en la tienda. Un hombre con camisa azul tomó un objeto y salió corriendo."></textarea>
            
            <select id="report-type-select" class="form-select mb-3">
                <option value="informe_interno">Informe Interno de Incidente</option>
                <option value="comunicacion_policial">Comunicación a Carabineros</option>
                <option value="correo_supervisor">Correo a Supervisor</option>
                <option value="reporte_general">Reporte General de Evento</option>
                <option value="acta_detencion_particulares">Acta de Detención por Particulares</option>
            </select>

            <button id="generate-report-btn" class="btn btn-primary w-100 mb-3" style="background-color: #283593; border-color: #283593; color: white;">Generar Borrador</button>
            
            <div id="report-output" class="p-3 bg-light rounded" style="min-height: 150px; border: 1px solid #ddd; text-align: left; white-space: pre-wrap; font-size: 0.9em; color: #333;">
                El borrador del informe aparecerá aquí.
            </div>
            <button id="copy-report-btn" class="btn btn-outline-secondary mt-3" style="display: none;">Copiar a Portapapeles</button>
            <a id="download-acta-btn" href="https://dal5.short.gy/Act" target="_blank" download="Acta_Detencion_Particulares.pdf" class="btn btn-success mt-3" style="display: none;">Descargar Acta (PDF)</a>
        </section>

        <section class="info-section">
            <h2 id="contacto">Contacto</h2>
            <p>Si tienes preguntas o necesitas más información, no dudes en contactarnos. Estamos aquí para ayudarte a ser un profesional de seguridad mejor informado y capacitado.</p>
            <address class="text-center">
                <strong>Daniel Elías Figueroa Chacama</strong><br>
                Ingeniero en Informática<br>
                Chile
            </address>
        </section>
    </div>

    <!-- Modal de Resultados del Examen -->
    <div id="results-modal-overlay">
        <div id="results-modal-content">
            <h3>Resultados del Examen</h3>
            <p>Respuestas correctas: <span id="modal-correct-count"></span> de <span id="modal-total-questions"></span></p>
            <p>Porcentaje: <span id="modal-percentage"></span>%</p>
            <p>Tu nota en escala del 1 al 7: <strong id="modal-grade"></strong></p>
            <p id="modal-message"></p>
            <button id="close-modal-btn">Cerrar</button>
        </div>
    </div>

    <!-- Botón flotante de IA -->
    <div id="floating-ai-button" aria-label="Abrir Clarificador de Inteligencia Artificial">
        <i class="bi bi-robot"></i>
    </div>

    <!-- Chat flotante del clarificador de IA -->
    <div id="ai-clarifier-chat" class="ai-clarifier-chat">
        <div class="chat-header">
            <h2>Clarificador IA</h2>
            <img src="gemini.png" alt="Logo de Gemini IA" class="gemini-logo">
            <button class="close-button" id="close-ai-chat">×</button>
        </div>
        <div class="chat-content">
            <p>¿Tienes dudas sobre algún artículo o normativa? Escribe tu pregunta y te ayudaremos.</p>
            <textarea id="ai-question-input" placeholder="Ej: ¿Qué dice el Decreto 93 sobre los requisitos de educación de un Guardia de Seguridad?"></textarea>
            <button id="ask-ai-btn">Preguntar a la IA</button>
            <div id="ai-clarifier-response" class="mt-3">
                <p>Tu respuesta aparecerá aquí.</p>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>Plataforma creada por Daniel Elías Figueroa Chacama, Ingeniero en Informática.</p>
        <p>© 2025 Todos los derechos reservados.</p>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOM Content Loaded. Initializing app logic.");

            // Navbar Shrink on Scroll
            const navbar = document.getElementById('mainNavbar');
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    navbar.classList.add('navbar-shrink');
                } else {
                    navbar.classList.remove('navbar-shrink');
                }
            });

            // Search Bar Toggle
            const searchToggle = document.getElementById('searchToggle');
            const searchBar = document.getElementById('searchBar');

            searchToggle.addEventListener('click', function() {
                searchBar.classList.toggle('show');
            });

            document.addEventListener('click', function(event) {
                if (!searchBar.contains(event.target) && !searchToggle.contains(event.target)) {
                    searchBar.classList.remove('show');
                }
            });

            // --- Quiz Logic ---
            const quizContainer = document.getElementById('quiz-container');
            const submitQuizBtn = document.getElementById('submit-quiz-btn');
            const startExamBtn = document.getElementById('start-exam-btn');
            const examSection = document.getElementById('exam-section');
            const subtleResponseBox = document.getElementById('subtle-response-box');

            // Modal elements for results
            const resultsModalOverlay = document.getElementById('results-modal-overlay');
            const resultsModalContent = document.getElementById('results-modal-content');
            const modalCorrectCount = document.getElementById('modal-correct-count');
            const modalTotalQuestions = document.getElementById('modal-total-questions');
            const modalPercentage = document.getElementById('modal-percentage');
            const modalGrade = document.getElementById('modal-grade');
            const modalMessage = document.getElementById('modal-message');
            const closeModalBtn = document.getElementById('close-modal-btn');
// Sistema de preguntas categorizadas para el examen OS-10
// Reemplazar el array defaultQuestions existente con esta estructura

const questionsByCategory = {
    "CONOCIMIENTOS LEGALES": [
        { question: "La labor básica de los Guardias de Seguridad es brindar personalmente seguridad y protección a bienes, personas e instalaciones.", correctAnswer: "Verdadero" },
        { question: "Cualquier persona puede ser detenida cuando hay sospecha de que cometió un delito.", correctAnswer: "Falso" },
        { question: "La existencia de la legítima defensa como justificación de un hecho, es determinada por la policía.", correctAnswer: "Falso" },
        { question: "Es obligatorio para cada lugar donde se desempeñen Guardias de Seguridad, la existencia de una Directiva de Funcionamiento debidamente autorizada por la Comisaría del sector jurisdiccional.", correctAnswer: "Verdadero" },
        { question: "Solamente durante la noche los Guardias de Seguridad pueden usar armas de fuego.", correctAnswer: "Falso" },
        { question: "La honra y dignidad de la persona es un derecho constitucional.", correctAnswer: "Verdadero" },
        { question: "La Constitución Política de la República establece la igualdad de las personas.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad puede ejercer sus funciones hasta el frontis de la instalación resguardada.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad en el cumplimiento de sus funciones deberá usar una tenida uniforme determinada por la Directiva de Funcionamiento que ha sido aprobada por la Prefectura de Carabineros respectiva.", correctAnswer: "Verdadero" },
        { question: "En el CUASIDELITO existe la culpa.", correctAnswer: "Verdadero" },
        { question: "El que sin derecho encerrare o detuviere a otro privándole de su libertad, comete el delito de secuestro.", correctAnswer: "Verdadero" },
        { question: "La Constitución nos garantiza el derecho a la vida y la libertad.", correctAnswer: "Verdadero" },
        { question: "Son cláusulas prohibidas en un contrato de trabajo, todas aquellas que implican la renuncia a derechos otorgados por las leyes laborales.", correctAnswer: "Verdadero" },
        { question: "El delito es toda acción u omisión voluntaria penada por la Ley.", correctAnswer: "Verdadero" },
        { question: "El contrato de trabajo es consensual y deberá ser extendido por escrito, dentro del plazo de 5 días de incorporado el trabajador y firmados por ambas partes, en dos ejemplares.", correctAnswer: "Verdadero" },
        { question: "En el sistema de vigilancia privada vigente, sólo los Guardias de Seguridad, están sujetos a la Fiscalización de la Autoridad Fiscalizadora de la prefectura de Carabineros de su sector jurisdiccional.", correctAnswer: "Falso" },
        { question: "El Guardia de Seguridad es un policía pagado por los privados.", correctAnswer: "Falso" },
        { question: "El Guardia de Seguridad actúa en las calles cerradas.", correctAnswer: "Falso" },
        { question: "Toda entidad bancaria debe tener equipo de filmación funcionando durante la atención de público.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad debe contar con seguro de vida un mínimo de 75 UF.", correctAnswer: "Verdadero" },
        { question: "Las personas autorizadas por la ley para privar de libertad son los agentes de seguridad, Carabineros de Chile y la Policía de Investigaciones.", correctAnswer: "Falso" },
        { question: "Los encubridores, autores, cómplices y víctimas son responsables de los delitos.", correctAnswer: "Falso" },
        { question: "Solamente los Guardias de Seguridad, nocheros y porteros deben capacitarse y no así los rondines.", correctAnswer: "Falso" },
        { question: "En el sitio del suceso el Guardia de Seguridad debe permitir el libre ingreso al lugar de curiosos.", correctAnswer: "Falso" },
        { question: "Existe legitima defensa si la agresión es ilegitima y actual y no existe otro medio para defenderse.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad sólo puede detener a los delincuentes.", correctAnswer: "Falso" },
        { question: "Todo Guardia de Seguridad debe efectuar un curso de capacitación y portar su tarjeta de identificación otorgada por la Autoridad Fiscalizadora respectiva.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad solamente puede detener y allanar al delincuente flagrante.", correctAnswer: "Falso" },
        { question: "Ante un delito flagrante el Guardia de Seguridad está facultado para detener por sospecha.", correctAnswer: "Falso" },
        { question: "El Guardia de Seguridad esta autorizado para ejercer en la vía pública conforme al art. 13 del D.S:93.", correctAnswer: "Falso" },
        { question: "La directiva de funcionamiento es un documento que debe confeccionar la empresa y acreditarlo ante la Autoridad Fiscalizadora.", correctAnswer: "Verdadero" },
        { question: "Las oficinas de seguridad privada operan en las respectivas Prefecturas de Carabineros como Autoridades Fiscalizadoras.", correctAnswer: "Verdadero" },
        { question: "En el delito de hurto no encontramos ni fuerza en las cosas ni violencia ni intimidación en las personas.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad puede portar armas de fuego cuando su empleador se lo permita.", correctAnswer: "Falso" },
        { question: "Delito es toda acción u omisión culpable penada por la Ley.", correctAnswer: "Verdadero" },
        { question: "Los delitos que generalmente se cometen en los supermercados son definidos tipificados como hurtos o faltas.", correctAnswer: "Verdadero" }
    ],

    "PRIMEROS AUXILIOS": [
        { question: "El objetivo básico de otorgar primeros auxilios es sólo establecer la identificación de la causa del daño que afecta al accidentado.", correctAnswer: "Falso" },
        { question: "Ante un traumatismo toráxico, lo primordial es inmovilizar el cuello para evitar un daño a la columna vertebral.", correctAnswer: "Falso" },
        { question: "Existen las hemorragias capilares, venosas y subjuntivas.", correctAnswer: "Falso" },
        { question: "Un hematoma se produce cuando hay fractura expuesta.", correctAnswer: "Falso" },
        { question: "Lo más importante en un parto es sacar al niño y pegarle una palmada para ver si esta vivo.", correctAnswer: "Falso" },
        { question: "Los primeros auxilios que se deben prestar a una persona con paro cardiaco es levantar los pies para la mejor circulación.", correctAnswer: "Falso" },
        { question: "En las luxaciones encontramos discontinuidad de una pieza ósea o hueso.", correctAnswer: "Falso" },
        { question: "Frente a un estado de schock debemos dejar que el accidentado duerma, para así lograr que se recupere de mejor forma.", correctAnswer: "Falso" },
        { question: "Los primeros auxilios a una persona con paro cardiaco es efectuar masaje cardiaco.", correctAnswer: "Verdadero" },
        { question: "La atención de primeros auxilios a una persona fracturada es efectuar masaje.", correctAnswer: "Falso" },
        { question: "La atención de primeros auxilios a una persona fracturada es efectuar un masaje cardiaco.", correctAnswer: "Falso" },
        { question: "Podemos distinguir las hemorragias venosas cuando la sangre brota sin fuerza y tiene un tono rojo oscuro.", correctAnswer: "Verdadero" },
        { question: "El botiquín de primeros auxilios es primordial en una instalación.", correctAnswer: "Verdadero" },
        { question: "La atención de primeros auxilios a una persona fracturada es efectuar un torniquete.", correctAnswer: "Falso" },
        { question: "La atención de primeros auxilios a una persona fracturada es elevar las extremidades inferiores.", correctAnswer: "Falso" },
        { question: "La atención de primeros auxilios a una persona fracturada es la inmovilización de la zona afectada.", correctAnswer: "Verdadero" },
        { question: "Frente a una hemorragia arterial se debe comprimir el punto venoso más cercano a la herida.", correctAnswer: "Falso" },
        { question: "De acuerdo a los principios de los primeros auxilios, no importa quién los aplica éstos, con tal de atender al afectado.", correctAnswer: "Falso" },
        { question: "El traumatismo encéfalo craneano puede ser abierto o cerrado.", correctAnswer: "Verdadero" },
        { question: "Frente a un parto normal debemos tomar al recién nacido de la cabeza y expulsarlo para que salga más rápido.", correctAnswer: "Falso" },
        { question: "El uso del torniquete sólo se aplica en casos extremos, debiendo contenerse la presión sanguínea por no más de 5 minutos, soltando 30 segundos.", correctAnswer: "Verdadero" },
        { question: "Las hemorragias pueden ser venosas y arteriales.", correctAnswer: "Verdadero" },
        { question: "No pueden producirse quemaduras con elementos como químicos ácidos.", correctAnswer: "Falso" },
        { question: "Los primeros auxilios a una persona con paro cardiaco es efectuar respiración boca a boca.", correctAnswer: "Verdadero" }
    ],

    "PROTECCIÓN DE INSTALACIONES": [
        { question: "Dentro de las funciones básicas de un vigilante privado y/o guardia de seguridad está la de desempeñar la protección de las personas tanto dentro como fuera de los recintos e instalaciones de la empresa.", correctAnswer: "Falso" },
        { question: "Cuando sea visitada la empresa por personal externo, básicamente se deben efectuar los siguientes procedimientos: identificación de la visita, solicitar con quién se va a entrevistar, dejar constancia en el libro de registro respectivo.", correctAnswer: "Verdadero" },
        { question: "Las rondas un control móvil superficial de áreas, realizadas con una frecuencia más o menos regular.", correctAnswer: "Verdadero" },
        { question: "Los tipos de fuego son A,B y C.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad debe utilizar psicología para enfrentar situaciones difíciles.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad es una barrera animal.", correctAnswer: "Falso" },
        { question: "Inspección de seguridad, consiste en controles sorpresivos del cumplimiento de las medidas y disposiciones de seguridad, emanadas del Estudio de Seguridad, Planes Manuales y/o Directiva de Funcionamiento.", correctAnswer: "Verdadero" },
        { question: "Seguridad de instalaciones involucra entre otras; protección de edificios, custodia de dependencias, protección de recintos donde las personas trabajan.", correctAnswer: "Verdadero" },
        { question: "El perro constituye una barrera natural.", correctAnswer: "Falso" },
        { question: "El sitio del suceso corresponde al lugar donde el Guardia de Seguridad presta servicios.", correctAnswer: "Falso" },
        { question: "Los accidentes se originan cuando se sobrepasan las vulnerabilidades.", correctAnswer: "Verdadero" },
        { question: "El factor sorpresa esta considerado como una vulnerabilidad.", correctAnswer: "Verdadero" },
        { question: "Dentro de los tipos de barreras tenemos las sonoras que están constituidos funcionalmente por perros adiestrados y destinados a anunciar la presencia de los extraños.", correctAnswer: "Verdadero" },
        { question: "Dentro de los tipos de barreras podemos destacar: naturales, artificiales, humanas, animales y de energía.", correctAnswer: "Verdadero" },
        { question: "La prevención está orientada fundamentalmente a actuar sobre el origen o causas de los accidentes, a fin de evitar los daños.", correctAnswer: "Verdadero" },
        { question: "La seguridad privada es la que se ejerce en privado.", correctAnswer: "Falso" },
        { question: "Ante un asalto, el Guardia de Seguridad, siempre enfrentará el factor sorpresa con que actúen los delincuentes.", correctAnswer: "Verdadero" },
        { question: "La seguridad personal, es el conjunto de acciones, actitudes e ideas que propenden a proteger principalmente los edificios, dependencias o recintos.", correctAnswer: "Falso" },
        { question: "Dentro de la clasificación de personas podemos indicar entre otros: El sexo, raza, edad, estatura, figura, etc.", correctAnswer: "Verdadero" },
        { question: "Vulnerabilidades que pueden afectar la seguridad son: el sabotaje o intento de este, el robo, la deslealtad funcionaria, comentarios tendenciosos.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad es una barrera artificial.", correctAnswer: "Falso" },
        { question: "Las barreras se clasifican en: Naturales, Artificiales, Animales y Humanas.", correctAnswer: "Verdadero" },
        { question: "Un cerro o una cordillera es una barrera artificial.", correctAnswer: "Falso" },
        { question: "Entre otros actos encontramos algunos que no atentan contra la seguridad como el sabotaje o intento de este, la apropiación, la deslealtad funcionaria y los comentarios tendenciosos.", correctAnswer: "Falso" },
        { question: "Dentro de los sentidos de la observación podemos mencionar: vista, oído, tacto, olfato y gusto.", correctAnswer: "Verdadero" },
        { question: "Dentro del control de accesos tenemos áreas de responsabilidad y cumplimiento denominadas: Restringidas y Prohibidas.", correctAnswer: "Verdadero" },
        { question: "Las barreras se definen como obstáculos que se interponen entre el delincuente y lo que se desea proteger.", correctAnswer: "Verdadero" },
        { question: "Las barreras se clasifican solamente en, alumbrado de perímetro y perros adiestrados.", correctAnswer: "Falso" },
        { question: "El objetivo básico del control de acceso es regular el egreso de personas y elementos del recinto a cargo del personal de vigilante privados y/o guardias de seguridad.", correctAnswer: "Falso" },
        { question: "Ante una amenaza de instalación de artefacto explosivo no se debe tocar o mover nada.", correctAnswer: "Verdadero" },
        { question: "El asaltante se caracteriza por actuar sin planificación alguna.", correctAnswer: "Falso" },
        { question: "Sólo el Jefe de Seguridad de una empresa debe conocer los planes de emergencia de ésta, para que no se divulguen entre el personal de la instalación.", correctAnswer: "Falso" },
        { question: "El prevenir se logra estando atento al servicio, controlar y fiscalizar al máximo las medidas de seguridad de la empresa.", correctAnswer: "Verdadero" },
        { question: "Dentro de los tipos de barreras se cuentan las artificiales.", correctAnswer: "Verdadero" },
        { question: "El vigilante privado o guardia de seguridad deben efectuar inspecciones a la instalación protegida para reconocer peligros de incendio.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad es una barrera artificial pasiva.", correctAnswer: "Falso" }
    ],

    "CONOCIMIENTOS DE SISTEMAS DE ALARMA": [
        { question: "Para detectar un incendio existen detectores de temperatura y de humo.", correctAnswer: "Verdadero" },
        { question: "Para proyectar un buen sistema de detección se debe considerar, que este sólo suene fuerte.", correctAnswer: "Falso" },
        { question: "Para una adecuada detección de incendios deben existir mangueras adecuadas y grifos cercanos.", correctAnswer: "Falso" },
        { question: "El circuito cerrado de televisión lo debemos considerar, que esta destinado al reemplazo total de Guardias de Seguridad.", correctAnswer: "Falso" },
        { question: "Las alarmas solo se activan en caso de incendio y sospechosas de robo y hurto.", correctAnswer: "Falso" },
        { question: "El extintor se utiliza para amagar un fuego.", correctAnswer: "Verdadero" },
        { question: "El circuito cerrado de televisión es un sistema apropiado sólo para áreas de difícil observación.", correctAnswer: "Falso" },
        { question: "Alarma es un elemento que sirve para advertir el peligro, sólo en casos de delitos flagrantes.", correctAnswer: "Falso" },
        { question: "Se puede contar entre otras alarmas los siguientes tipos: transceptores y teléfonos.", correctAnswer: "Falso" },
        { question: "Los polvos químicos de los extintores se clasifican en tipo, ABC, BC, CO2.", correctAnswer: "Verdadero" },
        { question: "Los medios de comunicación deben ser ocupados ante reales necesidades en forma ambigua y entregando en forma detallada los antecedentes.", correctAnswer: "Falso" },
        { question: "Los sensores son elementos que se activan, permitiendo percibir una determinada señal.", correctAnswer: "Verdadero" },
        { question: "Un sistema de alarmas debe tener etapas básicas, detección, control y respuesta.", correctAnswer: "Verdadero" },
        { question: "Las alarmas son elementos manuales o eléctricos que se utilizan para advertir peligro de intrusión o de incendio.", correctAnswer: "Verdadero" },
        { question: "Las condiciones básicas de un sistema electrónico de alarma son: facilidad de instalación, facilidad operacional, costo, características de funcionamiento, características eléctricas, instalación segura,capacitación y mantenimiento y respaldo.", correctAnswer: "Verdadero" },
        { question: "El uso indebido de los medios técnicos y la mala manipulación de artefactos producen fallas técnicas.", correctAnswer: "Verdadero" },
        { question: "El circuito cerrado de televisión es un complemento al sistema electrónico de alarma.", correctAnswer: "Verdadero" },
        { question: "El pulsador inalámbrico es aquel que opera a control remoto.", correctAnswer: "Verdadero" },
        { question: "Fuego de grandes proporciones es donde se quema lo que no está destinado a arder.", correctAnswer: "Verdadero" }
    ],

    "VALORES Y ÉTICA": [
        { question: "La tolerancia es fundamental en la convivencia laboral.", correctAnswer: "Verdadero" },
        { question: "A veces es necesario mentir para salir de algún problema.", correctAnswer: "Falso" },
        { question: "El cumplimento y espíritu de cuerpo se mide, presentando y censurando aquellas actitudes erróneas de todos los que integran un sistema de seguridad.", correctAnswer: "Verdadero" },
        { question: "Las comunicaciones interpersonales adecuadas constituyen una herramienta fundamental para lograr un ambiente positivo en las relaciones humanas del personal de seguridad.", correctAnswer: "Verdadero" },
        { question: "La honestidad es una habilidad para engañar a los demás sin crear ofensa.", correctAnswer: "Falso" },
        { question: "El subordinado debe darle cumplimiento a las ordenes, no importando las circunstancias.", correctAnswer: "Falso" },
        { question: "La educación y la cultura no tiene importancia en la labor del Guardia de Seguridad.", correctAnswer: "Falso" },
        { question: "Los roces dentro del sistema de vigilancia, constituyen una vulnerabilidad pues afectan el aspecto técnico operativo de la empresa protegida.", correctAnswer: "Verdadero" },
        { question: "El valor, el coraje, la osadía y la desvergüenza son elementos para mantener la moral al personal de seguridad.", correctAnswer: "Falso" },
        { question: "La presentación personal de seguridad, no tiene incidencia en el servicio.", correctAnswer: "Falso" },
        { question: "Para un desempeño eficiente, el Guardia de Seguridad debe considerar, ser eficaz en el trabajo, que es una profesión importante, que se debe conocer completamente sus funciones.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad. es la cara visible de la empresa.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad no le debe importar el respeto por el público en general.", correctAnswer: "Falso" },
        { question: "La honestidad es la obligación moral más grande.", correctAnswer: "Verdadero" },
        { question: "El trabajo armónico, conlleva entre otras una adecuada convivencia y un buen rendimiento.", correctAnswer: "Verdadero" },
        { question: "Es obligación del Guardia de Seguridad el desplegar iniciativa solamente ante eventuales riesgos o delitos.", correctAnswer: "Falso" },
        { question: "La motivación inadecuada de un Guardia de Seguridad puede ser origen de accidentes.", correctAnswer: "Verdadero" },
        { question: "La ética profesional es aquella que trata de la moral y de las obligaciones del hombre.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad es la imagen corporativa de la empresa.", correctAnswer: "Verdadero" },
        { question: "Vocación: es la disposición a ejercer determinadas tareas, es dedicarse a lo que se considera que tiene especial disposición.", correctAnswer: "Verdadero" },
        { question: "La moral es la capacidad del ser humano para distinguir entre lo bueno y lo malo.", correctAnswer: "Verdadero" },
        { question: "La Etica es la parte de la filosofía que trata de la moral que debe observar una persona.", correctAnswer: "Verdadero" },
        { question: "Según el concepto de ética podemos afirmar que es el coraje del hombre.", correctAnswer: "Falso" },
        { question: "Un Guardia de Seguridad debe poseer y exhibir cualidades como, tacto y criterio, cortesía y seguridad de sí mismo, carácter firme y lenguaje adecuado, buenos modales.", correctAnswer: "Verdadero" },
        { question: "El respeto en el lugar de trabajo no siempre es necesario.", correctAnswer: "Falso" },
        { question: "El Guardia de Seguridad y la empresa se deben a sus clientes.", correctAnswer: "Verdadero" },
        { question: "Los valores éticos y morales se dan en el ser humano por su capacidad de razonar y discernir.", correctAnswer: "Verdadero" },
        { question: "La existencia del rumor es primordial para crear un ambiente laboral con buenas relaciones humanas.", correctAnswer: "Falso" },
        { question: "Actuar con tino significa hacerlo con acierto, con buen juicio, para resolver un problema.", correctAnswer: "Verdadero" },
        { question: "De acuerdo a las acciones éticas que cumplen los Guardias de Seguridad se requiere de adecuados elementos como linternas, pito y esposas.", correctAnswer: "Falso" },
        { question: "La persona que trabaja en la instalación siempre confiará en el Guardia de Seguridad como una persona de buenas costumbre y además capacitada en situaciones de emergencias.", correctAnswer: "Verdadero" },
        { question: "El valor para enfrentar los riesgos profesionales es sinónimo de ser temerario.", correctAnswer: "Falso" },
        { question: "El concepto de autoridad, es necesario que una persona imponga a otra una determinación de manera obligatoria.", correctAnswer: "Verdadero" },
        { question: "Lo fundamental en la tarea del Guardia de Seguridad es demostrar diariamente su compromiso con la tarea de seguridad que asumido.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad además de su condición de tal, debe demostrar sus virtudes personales como fórmula exacta para el enriquecimiento de su actuar.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad debe ser, moderado en su actuar, esto es una muestra de auto control o autodisciplina.", correctAnswer: "Verdadero" },
        { question: "Por las funciones que cumplen los Guardias de Seguridad se requiere una estructura, bien jerarquizada y una disciplina más rigurosa que otras funciones laborales.", correctAnswer: "Verdadero" },
        { question: "La lealtad hacia los compañeros se demuestra, ejecutando el turno cuando éstos no llegan a su servicio, para que no se vea éste.", correctAnswer: "Verdadero" },
        { question: "La honradez no es un valor para el Guardia de Seguridad.", correctAnswer: "Falso" },
        { question: "La responsabilidad es asumir con las consecuencias de los actos de todos.", correctAnswer: "Falso" },
        { question: "Por rigurosas que sean las normas o procedimientos de control, debe existir amabilidad, deferencia, una actitud cortés y adecuada, por neutralizar el rechazo que dichas normas.", correctAnswer: "Verdadero" }
    ],

    "SISTEMAS DE COMUNICACIÓN Y ENLACE": [
        { question: "Respecto a una consulta telefónica, no se debe gastar a tiempo en verificaciones, para evitar mantener ocupada la línea.", correctAnswer: "Falso" },
        { question: "Teléfono es un elemento de comunicación, que nunca se debe utilizar porque es vulnerable.", correctAnswer: "Falso" },
        { question: "El fax dentro del sistema de comunicación y enlace, lo podemos definir como un equipo codificador y decodificador de relativa seguridad en su emisión.", correctAnswer: "Verdadero" },
        { question: "El contacto magnético se usa para detectar humo.", correctAnswer: "Falso" },
        { question: "Las fallas más comunes de los sistemas de alarmas pueden ser fallas de circuito, fallas de computador, fallas humanas.", correctAnswer: "Verdadero" },
        { question: "Las claves de lo sistemas radiales de los Guardias de Seguridad pueden copiar las claves de los Servicios de Emergencia Ambulancias, Bomberos, Carabineros.", correctAnswer: "Falso" },
        { question: "Dentro de los elementos de un sistema de enlace, se cuentan los transceptores, los cuales deben poseer una frecuencia conectada a Carabineros.", correctAnswer: "Falso" },
        { question: "Los sistemas de alarmas son métodos de protección de las personas y bienes.", correctAnswer: "Verdadero" },
        { question: "Los servicios de equipos radiales son autorizados y fiscalizados por la Subsecretaría de Telecomunicaciones.", correctAnswer: "Verdadero" },
        { question: "Las comunicaciones radiales entre una empresa de Seguridad y otra institución pueden realizarse a través de la misma frecuencia.", correctAnswer: "Falso" },
        { question: "Las comunicaciones del personal de Guardia de Seguridad no deben observar el conducto regular que exista en cada empresa, para agilizar el sistema.", correctAnswer: "Falso" },
        { question: "Ante un llamado anónimo que anuncie colocación de un artefacto explosivo, se debe cortar rápidamente la llamada, para evitar la comunicación.", correctAnswer: "Falso" },
        { question: "A toda persona ajena a la empresa se les proporcionará antecedentes relacionados con el funcionamiento de guardias o vigilancia, sólo cuando se requiera por escrito.", correctAnswer: "Falso" },
        { question: "Las comunicaciones por el fax deben ser breves y bien concretas, en beneficio del tiempo.", correctAnswer: "Verdadero" },
        { question: "Al activar un sistema de alarma de incendios no se debe evacuar el público desde la instalación amagada.", correctAnswer: "Falso" }
    ],

    "PREVENCIÓN Y CONTROL DE EMERGENCIA": [
        { question: "INFLAMABLES Sustancias que a alta temperatura ambiente desprenden vapores que, mezclados con el aire, pueden arder en presencia de una fuente de calor.", correctAnswer: "Falso" },
        { question: "Los grifos son de costo más alto y prestan una más deficiente acción por las largas tiras de mangueras y gran cantidad de extintores manuales que se deben emplear.", correctAnswer: "Falso" },
        { question: "Si las medidas preventivas no han sido suficientes y se produce el delito, el Guardia de Seguridad deberá mantener una actitud calmada, serena y de sangre fría, con el fin de que su actitud sirva de modelo para el personal y público presente en el recinto.", correctAnswer: "Verdadero" },
        { question: "Se recomienda que en toda llamada anónima que el receptor no trate de establecer el número de teléfono que llama; no tratar de identificar a la persona que realiza la llamada.", correctAnswer: "Falso" },
        { question: "Evacuación: Es un sistema que se aplica en una Empresa u Organización, para ingresar aun lugar, sitio, área o dependencia que se encuentra amagado por una situación de emergencia, temporal o permanente, que en forma organizada, metódica o coordinada, permita evitar daños a la integridad física de las personas y, cuando proceda, resguardar ciertos bienes.", correctAnswer: "Falso" },
        { question: "Ante una emergencia, es preciso tener presente algunas recomendaciones como: No utilizar ascensores. (Personas atrapadas - efecto chimenea), En caso de alarma, suspender trabajos y efectuar cortes de energía. No tratar de volver al lugar habitual de trabajo, en caso de encontrarse lejos, y seguir instrucciones del lugar donde se encuentren.", correctAnswer: "Verdadero" },
        { question: "INFLAMABLES Sustancias que a la temperatura ambiente normal desprenden vapores que, mezclados con el aire, pueden arder en presencia de una fuente de calor.", correctAnswer: "Verdadero" },
        { question: "En los primeros lugares de las causas de incendios y explosiones en la industria, se encuentran los líquidos inflamables.", correctAnswer: "Verdadero" },
        { question: "Fuegos clase D. Son los incendios de metales como sodio, titanio, magnesio, litio y circonio. El extintor debe tener la letra D, de color blanco, sobre una estrella de 5 puntas de color amarillo.", correctAnswer: "Verdadero" },
        { question: "Los estilos del cabello para su descripción pueden ser: largo, corto, muy corto, partido al lado, derecho (izquierdo), peinado hacia atrás, etc.", correctAnswer: "Verdadero" },
        { question: "La descripción de vehículos es más simple que la de personas, por el sólo hecho que los vehículos son repetitivos en sus características, sin embargo es posible notar algunos detalles que los diferencian de sus congéneres.", correctAnswer: "Verdadero" },
        { question: "En defensa personal se debe tener presente que siempre se debe actuar por instinto.", correctAnswer: "Falso" },
        { question: "Una vez que un Guardia ha recibido entrenamiento para reconocer los peligros de incendios, debería incluir este aspecto en los recorridos regulares que realiza en su servicio y tomar la acción correctiva cuando sea requerida.", correctAnswer: "Verdadero" },
        { question: "Los extintores de polvo químico seco se emplean entre otros para incendios de líquidos inflamables.", correctAnswer: "Verdadero" },
        { question: "Una de las tantas razones que justifican la labor de los Vigilantes Privados y/o Guardias de Seguridad es que con un accionar seguro, decidido y profesional, hagan a los antisociales cometer delitos.", correctAnswer: "Falso" },
        { question: "Un delincuente profesional puede: trabajar en equipo, hacerse pasar por vendedor y/o repartidor, mostrarse seguro de sí mismo, al ser desafiado verbalmente, reaccionar con agresividad, al ser desafiado físicamente pelear y huir.", correctAnswer: "Verdadero" },
        { question: "El color del cabello puede describirse como: negro, gris, rojo dorado, blanquecido, rubio, grisáceo. Debiendo tener presente que el cabello puede estar teñido.", correctAnswer: "Verdadero" },
        { question: "FUEGO: Es un proceso de combustión suficientemente intenso como para emitir calor y luz.", correctAnswer: "Verdadero" },
        { question: "Dependiendo del lugar que se inspeccione, para evitar incendios deberá buscar materiales combustibles almacenados cerca de operaciones que producen llamas o chispas ( como por ejemplo esmerilado, oxicorte o soldadura); líneas de combustible y oxígeno, que no están marcadas o que están incorrectamente identificadas permite que se les confunda con líneas de aire o agua; falta de letreros de no fumar en lugares donde hay líquidos, vapores, gases u otros materiales muy inflamables que están almacenados o se los está usando. Uso de herramientas o equipos que produzcan chispas, en estos lugares.", correctAnswer: "Verdadero" },
        { question: "Fuegos clase C. Son los incendios eléctricos o que ocurren cerca de equipos eléctricos, presentando además el peligro de un choque eléctrico. El extintor debe tener la letra C, de color blanco, sobre un circulo de color azul.", correctAnswer: "Verdadero" },
        { question: "Un sistema para el control de incendio es la sofocación que consiste en el aislamiento del comburente, (oxigeno o aire) y se logra mediante el empleo de agentes capaces de privar o de empobrecer de oxigeno la atmósfera que rodea el combustible afectado. En la mayoría de los casos basta con un porcentaje inferior a 15 % de oxigeno en el aire para lograr la extinción.", correctAnswer: "Verdadero" },
        { question: "En general no es posible describir el modus Operandi de los delincuentes pues estos varían según el tipo de delincuentes, características del delito a cometer y es así como podemos agruparlos en forma didáctica, considerando aquellos delitos en que puede accionar un Guardia de Seguridad de la siguiente manera.", correctAnswer: "Falso" },
        { question: "El registro de un detenido cuando legalmente este respaldado debe ser meticuloso y solo se puede realizar cuando el detenido esté reducido, aislado y esposado.", correctAnswer: "Verdadero" },
        { question: "Riesgos que originan las maquinarias y vehículos: El manejo de vehículos y maquinarias es un factor de permanente riesgo, en particular para quienes no están habituados a su uso.", correctAnswer: "Verdadero" },
        { question: "El pronto descubrimiento de un incendio es, indudablemente vital, tanto para la extinción como para la seguridad de las personas.", correctAnswer: "Verdadero" },
        { question: "Psicóticos son enfermos mentales en que hay una profunda alteración de la personalidad, más o menos prolongada, con peligrosidad y perjuicio para ellos mismos o para la sociedad. En cierto sentido, los sicóticos conceptualmente equivalen a los enajenados y pueden usarse estos términos indistintamente.", correctAnswer: "Verdadero" },
        { question: "Características que ayudan a detectar delincuentes: Constante movimiento de ojos, miradas a los sistemas de seguridad y no a la mercadería, conducta errante y/o nerviosa, con poco interés en adquirir la mercadería, búsqueda de privacidad e intento de llevar la mercadería a lugares aislados.", correctAnswer: "Verdadero" },
        { question: "Características que ayudan a detectar buenos clientes: Constante movimiento de ojos, miradas a los sistemas de seguridad y no a la mercadería, conducta errante y/o nerviosa, con poco interés en adquirir la mercadería, búsqueda de privacidad e intento de llevar la mercadería a lugares aislados.", correctAnswer: "Falso" },
        { question: "Cuando se esposa un detenido con un par de esposas, se esposa la muñeca derecha pasando grillete por entre su cinturón para finalizar esposando muñeca izquierda dejando palmas hacia fuera.", correctAnswer: "Verdadero" },
        { question: "Los incendios de tipo A son de leña y madera; los de tipo B son de elementos inflamables; y los tipos C por motores energizados.", correctAnswer: "Verdadero" },
        { question: "Frente a un fuego dentro de un recinto cerrado el Guardia de Seguridad cerrará puertas y ventanas para así evitar que entre más oxígeno.", correctAnswer: "Falso" },
        { question: "El personal que labora en una instalación, es un agente potencial generador de riesgo o víctima de ellos, en consecuencia debe existir un procedimiento que deben cumplir los controles desde el punto de vista de seguridad.", correctAnswer: "Verdadero" },
        { question: "Una vez que un Guardia ha recibido entrenamiento para reconocer los peligros de incendios, no debe incluir este aspecto en los recorridos regulares que realiza en su servicio y para tomar la acción correctiva cuando sea requerida.", correctAnswer: "Falso" },
        { question: "Un sistema para el control de incendio es la calefacción que consiste en el aumento de la temperatura en el ambiente y se logra mediante el empleo sobre el combustible, de agentes enfriadores capaces de obtener su aumento hasta valores superiores a la temperatura de combustión o ignición.", correctAnswer: "Falso" },
        { question: "Las manos se juzgan en cuanto a su tamaño, color y peculiaridades; los adornos en relación a su tamaño y cualquier característica del porte.", correctAnswer: "Verdadero" },
        { question: "Todo el personal, cualquiera sea su cargo o categoría dentro de la empresa, debe ceñirse a las disposiciones de evacuación, las que han sido incluidas previamente en el Plan respectivo.", correctAnswer: "Verdadero" },
        { question: "Un sistema para el control de incendio es la refrigeración que consiste en el descenso de la temperatura en el ambiente y se logra mediante el empleo sobre el combustible, de agentes enfriadores capaces de obtener su disminución hasta valores inferiores a la temperatura de combustión o ignición.", correctAnswer: "Verdadero" },
        { question: "Los extintores de bióxido de carbono (CO2) se emplean para incendio de inflamables.", correctAnswer: "Verdadero" },
        { question: "Cada guardia de seguridad debe tener una carpeta con los antecedentes de las personas de seguridad que laboran en las instalaciones como autorizaciones, credenciales y además Planes, Manuales de Seguridad, Directiva de Funcionamiento, Órdenes de Puesto, Planes de Emergencia, etc. para ser cotejados por la Autoridad Fiscalizadora.", correctAnswer: "Verdadero" },
        { question: "Es importante señalar que los delitos de robo y hurto no tienen características comunes como son la apropiación de cosa mueble ajena, con ánimo de lucro sin la voluntad de su dueño; la diferencia está en que en el robo se emplea la violencia o intimidación en las personas o fuerza en las cosas.", correctAnswer: "Falso" },
        { question: "Los llamados anónimos siempre corresponden a bromas.", correctAnswer: "Falso" },
        { question: "Es hurto cuando se introduce a un lugar mediante la seducción de un doméstico o a favor de nombres supuestos o simulación de autoridad y si se procede mediante fractura de puertas, vidrios, cierres, candados u otros dispositivos de protección o si utiliza medios de tracción.", correctAnswer: "Falso" },
        { question: "Un ángulo fundamental de descripción de personas es la Fotografía Hablada, y se emplea en informes para describir individuos sometidos a observación o han sido acusados de ser víctimas de un delito y son buscados.", correctAnswer: "Verdadero" },
        { question: "Evacuación: Es un sistema que se aplica en una Empresa u Organización, para abandonar un lugar, sitio, área o dependencia que se encuentra amagado por una situación de emergencia, temporal o permanente, que en forma organizada, metódica o coordinada, permita evitar daños a la integridad física de las personas y, cuando proceda, resguardar ciertos bienes.", correctAnswer: "Verdadero" },
        { question: "El Plan de evacuación elaborado por el organismo de seguridad, no debe estar en conocimiento de todo el personal, y su práctica debe realizarse con la periodicidad fijada.", correctAnswer: "Falso" },
        { question: "COMBUSTIBLES: Materiales que no son capaces de entrar en combustión, después de un calentamiento previo.", correctAnswer: "Falso" },
        { question: "En los primeros lugares de las causas de incendios y explosiones en la industria, se encuentran los líquidos incombustibles.", correctAnswer: "Falso" },
        { question: "Entre los dispositivos detectores de fuego encontramos, detectores de calor, detectores de temperatura fija, detectores por rango de elevación rápida de temperatura, detectores de humo, detector instantáneo o de llama, detectores de vapor.", correctAnswer: "Verdadero" },
        { question: "Los extintores de agua se usan para incendios tipo C.", correctAnswer: "Falso" },
        { question: "No se estima como violencia o intimidación en las personas en el delito de robo, el que para obtener la entrega o manifestación de una cosa alegare orden falsa de alguna autoridad o la diere por sí fingiéndose ministro de justicia o funcionario público.", correctAnswer: "Verdadero" },
        { question: "Se entiende por fuerza en las cosas, cuando el hurto se efectúa en un lugar habitado o deshabitado, con escalamiento, entendiéndose que lo hay, cuando se entra por vía no destinada al efecto, por forados o con rompimiento de paredes o techos o con fracturas en las puertas o ventanas, fracturas de puertas interiores, armarios, arcas u otra clase de muebles u objetos cerrados o sellados.", correctAnswer: "Verdadero" },
        { question: "Un sistema para el control de incendio es la inhibición que consiste en evitar o romper la reacción en cadena y se logra mediante el empleo de productos que, por efectos de la temperatura, reaccionan con los gases combustibles y/o con el comburente.", correctAnswer: "Verdadero" },
        { question: "Recomendaciones de tipo práctico ante llamados anónimos son: Anotar fecha, hora y número de teléfono en el cual se recibió el llamado ( dentro de las posibilidades ), Determinar si el que llamó es voz de varón o mujer ( o simulada o falsa ), En lo posible recordar el tono de voz, Escuchar, al mismo tiempo que se está hablando, los ruidos de fondo (ruidos callejeros o de ambiente, vehículos, voces, cosas particulares).", correctAnswer: "Verdadero" },
        { question: "Todo el personal, cualquiera sea su cargo o categoría dentro de la empresa, no debe ceñirse a las disposiciones de evacuación.", correctAnswer: "Falso" },
        { question: "Sabemos que para que exista fuego es necesario que se reúnan los cuatro elementos constituyentes. Para extinguirlo, por lo consiguiente, bastará con eliminar alguno de ellos.", correctAnswer: "Verdadero" },
        { question: "Dependiendo del lugar que se inspeccione, para evitar incendios no se debe perder tiempo en buscar cosas tales como escobas, tubos, y otros desperdicios colocados alrededor o contra los interruptores del circuito eléctrico; recipientes con pintura o solvente que se han dejado sin cerrar y/o cerca de fuentes de calor; desperdicios inflamables (como por ejemplo alfombras, papeles, cajas y maderas) que podrían inflamarse o proporcionar combustible a un fuego que tuvo como origen otra fuente.", correctAnswer: "Falso" },
        { question: "La energía eléctrica está presente en casi todas las actividades en que el hombre interviene, ya sea en el hogar, la industria, la oficina, el laboratorio, el taller, etc. Su uso ha significado un gran adelanto y comodidad, pero al mismo tiempo, ha traído como consecuencia una gran cantidad de riesgos, muchas veces fatales o con secuelas importantes.", correctAnswer: "Verdadero" },
        { question: "Algunas acciones inseguras de electricistas son: Falta de conocimientos adecuados sobre la materia, Uso de equipos indebidos, Uso de material indebido, No usar elementos de protección, Ejecutar trabajos con equipos en mal estado.", correctAnswer: "Verdadero" },
        { question: "La cara se juzga en cuanto a su tamaño, color y peculiaridades; la cabeza, en relación a su tamaño y cualquier característica del porte.", correctAnswer: "Verdadero" },
        { question: "La tez puede ser blanca, oscura, bronceada, amarillenta, rojiza, negra, morena o roja.", correctAnswer: "Verdadero" },
        { question: "El pronto descubrimiento de un incendio es, indudablemente negativo, tanto para la extinción como para la seguridad de las personas.", correctAnswer: "Falso" },
        { question: "Los extintores de polvo químico seco se emplean para un solo tipo de fuego.", correctAnswer: "Falso" },
        { question: "Si es posible, señalar un patrón que normalmente se encuentra en los delitos, que es actuar sobre seguro o con una seguridad relativamente alta de conseguir sus fines.", correctAnswer: "Verdadero" },
        { question: "El extintor de polvo químico seco, sólo se puede utilizar en fuegos de clasificación A y B.", correctAnswer: "Falso" },
        { question: "Fuegos clase A. Son los incendios de papeles, trapos, maderas, desperdicios. El extintor debe tener la letra A, de color blanco sobre un triángulo de color verde.", correctAnswer: "Verdadero" }
    ],

    "PREGUNTAS ADICIONALES": [
        { question: "La Autoridad Fiscalizadora de la Seguridad Privada en Chile es la Prefectura de Carabineros de Chile del sector.", correctAnswer: "Verdadero" },
        { question: "La Ley N° 21.659, publicada en marzo de 2024, es la única ley que regula la seguridad privada en Chile actualmente.", correctAnswer: "Falso" },
        { question: "La seguridad privada, según las normativas vigentes antes de la Ley 21.659, busca reemplazar a la seguridad pública.", correctAnswer: "Falso" },
        { question: "Uno de los requisitos para ser Guardia de Seguridad según el Decreto 93 es tener 18 años.", correctAnswer: "Verdadero" },
        { question: "Los Guardias de Seguridad están autorizados para portar armas de fuego en el ejercicio de sus funciones según el Decreto 93.", correctAnswer: "Falso" },
        { question: "El curso de formación para Guardia de Seguridad, según el Decreto 93, tiene una duración de 90 horas.", correctAnswer: "Verdadero" },
        { question: "El seguro de vida para Guardias de Seguridad, según el Decreto 93, tiene una cifra asegurada de 75 UTM.", correctAnswer: "Verdadero" },
        { question: "El uniforme de un Guardia de Seguridad, según el Decreto 93, es libre y sin especificaciones de color.", correctAnswer: "Falso" },
        { question: "Un Guardia de Seguridad está facultado para detener a alguien solo en caso de sorprenderlo en delito flagrante.", correctAnswer: "Verdadero" },
        { question: "Delito es toda acción u omisión VOLUNTARIA penada por la Ley.", correctAnswer: "Verdadero" },
        { question: "Cuasidelito es toda acción u omisión INVOLUNTARIA, penada por la ley.", correctAnswer: "Verdadero" },
        { question: "La diferencia entre robo y hurto es que el robo se comete con violencia, intimidación o fuerza en las cosas, mientras que el hurto no.", correctAnswer: "Verdadero" },
        { question: "La legítima defensa es aplicable solo si existe presencia policial en el momento de la agresión.", correctAnswer: "Falso" },
        { question: "El sitio del suceso debe ser preservado y no alterado para la investigación.", correctAnswer: "Verdadero" },
        { question: "Una ronda fija se caracteriza por tener la hora y el trayecto preestablecidos.", correctAnswer: "Verdadero" },
        { question: "Los Guardias de Seguridad deben proteger personas y bienes, siendo la vida del guardia la más importante.", correctAnswer: "Verdadero" },
        { question: "Ante el hallazgo de un artefacto explosivo, la primera acción debe ser intentar desactivarlo si se tienen conocimientos.", correctAnswer: "Falso" },
        { question: "Una evacuación es el traslado ordenado de personas hacia una zona de seguridad designada.", correctAnswer: "Verdadero" },
        { question: "Una Directiva de Funcionamiento es un documento que señala el funcionamiento íntegro de los guardias de seguridad.", correctAnswer: "Verdadero" },
        { question: "El Estudio de Seguridad es aprobado por la Prefectura de Carabineros del sector.", correctAnswer: "Verdadero" },
        { question: "El porte ilegal de armas es portar un arma en la vía pública sin autorización.", correctAnswer: "Verdadero" },
        { question: "La Subsecretaría de Telecomunicaciones (SUBTEL) es la entidad que autoriza el uso de radiocomunicaciones en seguridad privada.", correctAnswer: "Verdadero" },
        { question: "En un supermercado, un guardia puede detener a una persona por consumir un alimento antes de pasar por caja, incluso si no ha salido del establecimiento.", correctAnswer: "Falso" },
        { question: "El secuestro es el traslado o retención de una o más personas sin su consentimiento.", correctAnswer: "Verdadero" },
        { question: "La misión de Carabineros de Chile incluye garantizar el Orden y la Seguridad Pública.", correctAnswer: "Verdadero" },
        { question: "Escalamiento es ingresar a una propiedad por una vía no destinada al efecto.", correctAnswer: "Verdadero" },
        { question: "La función principal de una antena en un transceptor portátil es amplificar el sonido.", correctAnswer: "Falso" },
        { question: "El contacto magnético es un sistema de alarma utilizado en puertas y ventanas para detectar aperturas.", correctAnswer: "Verdadero" },
        { question: "Los daños físicos y psíquicos sufridos por un guardia en el cumplimiento de sus funciones se consideran actos del servicio y pueden derivar en enfermedades profesionales.", correctAnswer: "Verdadero" },
        { question: "Para ser Guardia de Seguridad, se requiere haber cursado educación básica completa.", correctAnswer: "Falso" },
        { question: "No tiene responsabilidad penal quienes compran una cosa hurtada, ya que él no la sustrajo.", correctAnswer: "Falso" },
        { question: "La legítima defensa solamente se hace extensiva a la propia persona y no a terceros.", correctAnswer: "Falso" },
        { question: "Robo es la apropiación de una cosa sin que intervengan la fuerza o violencia.", correctAnswer: "Falso" },
        { question: "Son responsables en la comisión de un delito, los autores, los cómplices y los encubridores cuando en ellos solo se utilice imprudencia y negligencia.", correctAnswer: "Falso" },
        { question: "La policía debe eximir de responsabilidad penal al que obre en defensa de su persona o derechos, siempre que concurra, entre otras circunstancias la agresión ilegítima.", correctAnswer: "Verdadero" },
        { question: "La Nación políticamente organizada es sinónimo de Estado.", correctAnswer: "Verdadero" },
        { question: "En el sistema de vigilancia privada vigente, solo los Guardias de Seguridad, están sujetos a la fiscalización de la Autoridad Fiscalizadora de la prefectura de Carabineros de su sector jurisdiccional.", correctAnswer: "Falso" },
        { question: "En algunos casos los Guardias de Seguridad pueden actuar de civil, si están debidamente autorizados por la Autoridad Fiscalizadora.", correctAnswer: "Verdadero" },
        { question: "El O.S. 10 no puede fiscalizar a los Guardias de Seguridad los días domingos y festivos.", correctAnswer: "Falso" },
        { question: "No es obligación que los Guardias de Seguridad mantengan la Directiva de Funcionamiento en su respectiva instalación.", correctAnswer: "Falso" },
        { question: "Las alarmas son elementos manuales o eléctricos que se utilizan para advertir peligro de intrusión o de incendio.", correctAnswer: "Verdadero" },
        { question: "Para una adecuada detección de incendios deben existir mangueras adecuadas y grifos cercanos.", correctAnswer: "Falso" },
        { question: "Un sistema de alarmas debe tener etapas básicas, detección, control y respuesta.", correctAnswer: "Verdadero" },
        { question: "El circuito cerrado de Televisión es un complemento al sistema electrónico de alarma.", correctAnswer: "Verdadero" },
        { question: "La empresa de seguridad privada debe informar mensualmente a Carabineros sobre el personal que labora en sus instalaciones.", correctAnswer: "Verdadero" },
        { question: "Los guardias pueden realizar registros corporales a personas que ingresen a las instalaciones que custodian.", correctAnswer: "Falso" },
        { question: "El guardia de seguridad puede usar la fuerza física solo en legítima defensa propia o de terceros.", correctAnswer: "Verdadero" },
        { question: "Es obligatorio que el guardia de seguridad mantenga un libro de novedades actualizado durante su turno.", correctAnswer: "Verdadero" },
        { question: "El curso OS-10 debe ser renovado cada 3 años según la normativa vigente.", correctAnswer: "Falso" },
        { question: "Los guardias de seguridad pueden portar bastón de goma como elemento de protección personal.", correctAnswer: "Verdadero" },
        { question: "La detención por particulares no puede exceder de 24 horas sin entregar al detenido a la autoridad competente.", correctAnswer: "Verdadero" }
    ]
};
            // Función para crear el array de preguntas mezcladas categorizadamente
function createCategorizedQuestions() {
    const allQuestions = [];
    const categories = Object.keys(questionsByCategory);
    
    // Obtener 3-5 preguntas de cada categoría de manera aleatoria
    categories.forEach(category => {
        const categoryQuestions = questionsByCategory[category];
        const shuffledCategoryQuestions = shuffleArray([...categoryQuestions]);
        
        // Determinar cuántas preguntas tomar de cada categoría
        let questionsToTake;
        switch(category) {
            case "CONOCIMIENTOS LEGALES":
                questionsToTake = 5; // Más preguntas de esta categoría importante
                break;
            case "PRIMEROS AUXILIOS":
                questionsToTake = 4;
                break;
            case "PROTECCIÓN DE INSTALACIONES":
                questionsToTake = 5; // Categoría importante
                break;
            case "CONOCIMIENTOS DE SISTEMAS DE ALARMA":
                questionsToTake = 3;
                break;
            case "VALORES Y ÉTICA":
                questionsToTake = 4;
                break;
            case "SISTEMAS DE COMUNICACIÓN Y ENLACE":
                questionsToTake = 3;
                break;
            case "PREVENCIÓN Y CONTROL DE EMERGENCIA":
                questionsToTake = 4;
                break;
            case "PREGUNTAS ADICIONALES":
                questionsToTake = 2;
                break;
            default:
                questionsToTake = 3;
        }
        
        // Agregar las preguntas seleccionadas con la información de categoría
        for (let i = 0; i < Math.min(questionsToTake, shuffledCategoryQuestions.length); i++) {
            allQuestions.push({
                ...shuffledCategoryQuestions[i],
                category: category
            });
        }
    });
    
    // Mezclar todas las preguntas seleccionadas
    return shuffleArray(allQuestions);
}

// Función para mostrar las estadísticas de categorías al final del examen
function showCategoryStats(questions, userAnswers) {
    const categoryStats = {};
    
    questions.forEach((question, index) => {
        const category = question.category;
        if (!categoryStats[category]) {
            categoryStats[category] = { total: 0, correct: 0 };
        }
        categoryStats[category].total++;
        
        if (userAnswers[index] === question.correctAnswer) {
            categoryStats[category].correct++;
        }
    });
    
    return categoryStats;
}

// IMPORTANTE: Reemplazar la función generateQuestions existente con esta versión
function generateQuestionsCategorized() {
    console.log("generateQuestionsCategorized function called.");
    
    // Show loading message
    quizContainer.innerHTML = '<p class="text-center text-info"><span class="spinner-border text-info" role="status"></span> Generando preguntas categorizadas... Esto puede tardar unos segundos.</p>';
    quizContainer.style.display = 'block';
    startExamBtn.style.display = 'none';
    submitQuizBtn.style.display = 'none';

    // Activate persistent red border for the exam section
    examSection.classList.add('active-red-border');

    // Show subtle message box
    if (subtleResponseBox) { 
        subtleResponseBox.style.display = 'block';
        subtleResponseBox.classList.add('show');
        subtleResponseBox.textContent = '¡Generando preguntas categorizadas, por favor espera!';
    }

    // Simulate loading time and then generate categorized questions
    setTimeout(() => {
        questions = createCategorizedQuestions();
        userAnswers = {};
        
        displayCategorizedQuiz();
        
        if (subtleResponseBox) {
            subtleResponseBox.textContent = '¡30 preguntas categorizadas cargadas! Verás preguntas de todas las materias. Una vez que selecciones una respuesta, no podrás cambiarla. ¡Mucha suerte!';
            setTimeout(() => {
                subtleResponseBox.classList.remove('show');
                setTimeout(() => subtleResponseBox.style.display = 'none', 500);
            }, 4000);
        }
    }, 1000);
}

// Función para mostrar el quiz categorizado
function displayCategorizedQuiz() {
    quizContainer.innerHTML = '';
    
    questions.forEach((q, index) => {
        const questionCard = document.createElement('div');
        questionCard.classList.add('question-card');
        
        // Agregar badge de categoría
        const categoryBadge = getCategoryBadge(q.category);
        
        questionCard.innerHTML = `
            <div class="category-badge-container mb-2">
                ${categoryBadge}
            </div>
            <h5>${index + 1}. ${q.question}</h5>
            <div class="options-container">
                <label class="option-button" data-question="${index}" data-value="Verdadero">
                    <input class="form-check-input" type="radio" name="question${index}" value="Verdadero" style="display: none;">
                    Verdadero
                </label>
                <label class="option-button" data-question="${index}" data-value="Falso">
                    <input class="form-check-input" type="radio" name="question${index}" value="Falso" style="display: none;">
                    Falso
                </label>
            </div>
            <div class="feedback-message mt-2" style="font-weight: 600; display: none;"></div>
        `;
        quizContainer.appendChild(questionCard);

        // Add event listeners to option buttons (mismo código que antes)
        const optionButtons = questionCard.querySelectorAll('.option-button');
        optionButtons.forEach(button => {
            button.addEventListener('click', function() {
                const questionIndex = parseInt(this.dataset.question);
                
                if (userAnswers[questionIndex] !== undefined) {
                    return;
                }
                
                const selectedValue = this.dataset.value;
                const currentQuestion = questions[questionIndex];
                const feedbackMessage = questionCard.querySelector('.feedback-message');

                userAnswers[questionIndex] = selectedValue;

                optionButtons.forEach(btn => {
                    btn.classList.remove('selected', 'correct', 'incorrect');
                });

                this.classList.add('selected');
                
                if (selectedValue === currentQuestion.correctAnswer) {
                    this.classList.add('correct');
                    feedbackMessage.style.color = '#28a745';
                    feedbackMessage.textContent = '¡Correcto!';
                } else {
                    this.classList.add('incorrect');
                    feedbackMessage.style.color = '#dc3545';
                    feedbackMessage.textContent = `Incorrecto. La respuesta correcta era: "${currentQuestion.correctAnswer}".`;
                }

                feedbackMessage.style.display = 'block';
                questionCard.classList.add('answered-blue-border');
                
                optionButtons.forEach(btn => {
                    btn.style.pointerEvents = 'none';
                    btn.style.opacity = '0.8';
                    btn.style.cursor = 'not-allowed';
                });
                
                const lockMessage = document.createElement('div');
                lockMessage.style.cssText = 'font-size: 0.8em; color: #666; margin-top: 8px; font-style: italic;';
                lockMessage.textContent = '🔒 Respuesta registrada - No se puede modificar';
                feedbackMessage.appendChild(lockMessage);

                if (Object.keys(userAnswers).length === questions.length) {
                    submitQuizBtn.style.display = 'block';
                    showSubtleMessage('¡Todas las preguntas respondidas! Puedes enviar tu examen.');
                }
            });
        });
    });

    console.log("Categorized quiz questions displayed.");
}

// Función para obtener el badge de categoría con colores
function getCategoryBadge(category) {
    const categoryColors = {
        "CONOCIMIENTOS LEGALES": "bg-primary",
        "PRIMEROS AUXILIOS": "bg-danger", 
        "PROTECCIÓN DE INSTALACIONES": "bg-success",
        "CONOCIMIENTOS DE SISTEMAS DE ALARMA": "bg-warning text-dark",
        "VALORES Y ÉTICA": "bg-info",
        "SISTEMAS DE COMUNICACIÓN Y ENLACE": "bg-secondary",
        "PREVENCIÓN Y CONTROL DE EMERGENCIA": "bg-dark",
        "PREGUNTAS ADICIONALES": "bg-purple"
    };
    
    const colorClass = categoryColors[category] || "bg-secondary";
    const categoryShort = getCategoryShortName(category);
    
    return `<span class="badge ${colorClass} category-badge">${categoryShort}</span>`;
}

// Función para obtener nombres cortos de categorías
function getCategoryShortName(category) {
    const shortNames = {
        "CONOCIMIENTOS LEGALES": "Legal",
        "PRIMEROS AUXILIOS": "Primeros Auxilios",
        "PROTECCIÓN DE INSTALACIONES": "Protección",
        "CONOCIMIENTOS DE SISTEMAS DE ALARMA": "Sistemas Alarma",
        "VALORES Y ÉTICA": "Ética",
        "SISTEMAS DE COMUNICACIÓN Y ENLACE": "Comunicación",
        "PREVENCIÓN Y CONTROL DE EMERGENCIA": "Emergencias",
        "PREGUNTAS ADICIONALES": "Adicionales"
    };
    
    return shortNames[category] || category;
}

// Función modificada para enviar quiz con estadísticas por categoría
function submitCategorizedQuiz() {
    let score = 0;
    questions.forEach((q, index) => {
        if (userAnswers[index] === q.correctAnswer) {
            score++;
        }
    });

    const maxScore = questions.length;
    const percentage = (score / maxScore) * 100;
    const grade = calculateGrade(percentage);
    const passed = grade >= 4.0;
    
    // Obtener estadísticas por categoría
    const categoryStats = showCategoryStats(questions, userAnswers);

    // Populate modal content
    modalCorrectCount.textContent = score;
    modalTotalQuestions.textContent = maxScore;
    modalPercentage.textContent = percentage.toFixed(1);
    modalGrade.textContent = grade.toFixed(1);

    // Crear contenido detallado por categorías
    let categoryBreakdown = '<div class="category-breakdown mt-3"><h6>Resultados por Categoría:</h6>';
    Object.entries(categoryStats).forEach(([category, stats]) => {
        const categoryPercentage = ((stats.correct / stats.total) * 100).toFixed(1);
        const categoryShort = getCategoryShortName(category);
        const statusIcon = stats.correct === stats.total ? '✅' : 
                          categoryPercentage >= 60 ? '⚠️' : '❌';
        
        categoryBreakdown += `
            <div class="category-stat">
                ${statusIcon} <strong>${categoryShort}:</strong> ${stats.correct}/${stats.total} (${categoryPercentage}%)
            </div>
        `;
    });
    categoryBreakdown += '</div>';

    // Set modal message and color
    resultsModalContent.classList.remove('pass', 'fail');
    if (passed) {
        modalMessage.innerHTML = '¡Felicitaciones! Has aprobado.' + categoryBreakdown;
        resultsModalContent.classList.add('pass');
    } else {
        modalMessage.innerHTML = 'Necesitas repasar más. ¡No te desanimes!' + categoryBreakdown;
        resultsModalContent.classList.add('fail');
    }

    // Show the modal
    resultsModalOverlay.style.display = 'flex';
    setTimeout(() => resultsModalOverlay.classList.add('show'), 10);

    submitQuizBtn.style.display = 'none';
    
    // Disable all option buttons
    document.querySelectorAll('.option-button').forEach(button => {
        button.style.pointerEvents = 'none';
        button.style.opacity = '0.7';
    });

    console.log("Categorized quiz submitted and results displayed in modal. Score:", score);
}

            // Function to shuffle an array
            function shuffleArray(array) {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }

            // Function to generate quiz questions
            function generateQuestions() {
                console.log("generateQuestions function called.");
                
                // Show loading message
                quizContainer.innerHTML = '<p class="text-center text-info"><span class="spinner-border text-info" role="status"></span> Generando preguntas... Esto puede tardar unos segundos.</p>';
                quizContainer.style.display = 'block';
                startExamBtn.style.display = 'none';
                submitQuizBtn.style.display = 'none';

                // Activate persistent red border for the exam section
                examSection.classList.add('active-red-border');

                // Show subtle message box
                if (subtleResponseBox) { 
                    subtleResponseBox.style.display = 'block';
                    subtleResponseBox.classList.add('show');
                    subtleResponseBox.textContent = '¡Generando preguntas, por favor espera!';
                }

                // Simulate loading time and then generate questions
                setTimeout(() => {
                    // Usar exactamente las primeras 30 preguntas del banco (sin slice, ya que defaultQuestions tiene exactamente 50)
                    questions = shuffleArray(defaultQuestions).slice(0, 30); // Asegurar exactamente 30 preguntas
                    userAnswers = {};
                    
                    displayQuiz();
                    
                    if (subtleResponseBox) {
                        subtleResponseBox.textContent = '¡Exactamente 30 preguntas cargadas! Una vez que selecciones una respuesta, no podrás cambiarla. ¡Mucha suerte!';
                        setTimeout(() => {
                            subtleResponseBox.classList.remove('show');
                            setTimeout(() => subtleResponseBox.style.display = 'none', 500);
                        }, 4000); // Mostrar por 4 segundos para dar tiempo a leer el mensaje
                    }
                }, 1000);
            }

            // Function to display quiz questions
            function displayQuiz() {
                quizContainer.innerHTML = '';
                
                questions.forEach((q, index) => {
                    const questionCard = document.createElement('div');
                    questionCard.classList.add('question-card');
                    questionCard.innerHTML = `
                        <h5>${index + 1}. ${q.question}</h5>
                        <div class="options-container">
                            <label class="option-button" data-question="${index}" data-value="Verdadero">
                                <input class="form-check-input" type="radio" name="question${index}" value="Verdadero" style="display: none;">
                                Verdadero
                            </label>
                            <label class="option-button" data-question="${index}" data-value="Falso">
                                <input class="form-check-input" type="radio" name="question${index}" value="Falso" style="display: none;">
                                Falso
                            </label>
                        </div>
                        <div class="feedback-message mt-2" style="font-weight: 600; display: none;"></div>
                    `;
                    quizContainer.appendChild(questionCard);

                    // Add event listeners to option buttons
                    const optionButtons = questionCard.querySelectorAll('.option-button');
                    optionButtons.forEach(button => {
                        button.addEventListener('click', function() {
                            const questionIndex = parseInt(this.dataset.question);
                            
                            // Verificar si la pregunta ya fue respondida (NUEVA FUNCIONALIDAD)
                            if (userAnswers[questionIndex] !== undefined) {
                                // Si ya fue respondida, no hacer nada
                                return;
                            }
                            
                            const selectedValue = this.dataset.value;
                            const currentQuestion = questions[questionIndex];
                            const feedbackMessage = questionCard.querySelector('.feedback-message');

                            // Store user answer
                            userAnswers[questionIndex] = selectedValue;

                            // Remove all selected/feedback classes from this question
                            optionButtons.forEach(btn => {
                                btn.classList.remove('selected', 'correct', 'incorrect');
                            });

                            // Add selected class to clicked button
                            this.classList.add('selected');
                            
                            // Show immediate feedback
                            if (selectedValue === currentQuestion.correctAnswer) {
                                this.classList.add('correct');
                                feedbackMessage.style.color = '#28a745';
                                feedbackMessage.textContent = '¡Correcto!';
                            } else {
                                this.classList.add('incorrect');
                                feedbackMessage.style.color = '#dc3545';
                                feedbackMessage.textContent = `Incorrecto. La respuesta correcta era: "${currentQuestion.correctAnswer}".`;
                            }

                            feedbackMessage.style.display = 'block';
                            questionCard.classList.add('answered-blue-border');
                            
                            // BLOQUEAR TODOS LOS BOTONES DE ESTA PREGUNTA (NUEVA FUNCIONALIDAD)
                            optionButtons.forEach(btn => {
                                btn.style.pointerEvents = 'none';
                                btn.style.opacity = '0.8';
                                btn.style.cursor = 'not-allowed';
                            });
                            
                            // Agregar texto explicativo de que la respuesta está bloqueada
                            const lockMessage = document.createElement('div');
                            lockMessage.style.cssText = 'font-size: 0.8em; color: #666; margin-top: 8px; font-style: italic;';
                            lockMessage.textContent = '🔒 Respuesta registrada - No se puede modificar';
                            feedbackMessage.appendChild(lockMessage);

                            // Check if all questions are answered
                            if (Object.keys(userAnswers).length === questions.length) {
                                submitQuizBtn.style.display = 'block';
                                // Mostrar mensaje de que puede enviar el examen
                                showSubtleMessage('¡Todas las preguntas respondidas! Puedes enviar tu examen.');
                            }
                        });
                    });
                });

                console.log("Quiz questions displayed.");
            }

            // Function to submit quiz and calculate score
            function submitQuiz() {
                let score = 0;
                questions.forEach((q, index) => {
                    if (userAnswers[index] === q.correctAnswer) {
                        score++;
                    }
                });

                const maxScore = questions.length;
                const percentage = (score / maxScore) * 100;
                const grade = calculateGrade(percentage);
                const passed = grade >= 4.0;

                // Populate modal content
                modalCorrectCount.textContent = score;
                modalTotalQuestions.textContent = maxScore;
                modalPercentage.textContent = percentage.toFixed(1);
                modalGrade.textContent = grade.toFixed(1);

                // Set modal message and color
                resultsModalContent.classList.remove('pass', 'fail');
                if (passed) {
                    modalMessage.textContent = '¡Felicitaciones! Has aprobado.';
                    resultsModalContent.classList.add('pass');
                } else {
                    modalMessage.textContent = 'Necesitas repasar más. ¡No te desanimes!';
                    resultsModalContent.classList.add('fail');
                }

                // Show the modal
                resultsModalOverlay.style.display = 'flex';
                setTimeout(() => resultsModalOverlay.classList.add('show'), 10);

                submitQuizBtn.style.display = 'none';
                
                // Disable all option buttons
                document.querySelectorAll('.option-button').forEach(button => {
                    button.style.pointerEvents = 'none';
                    button.style.opacity = '0.7';
                });

                console.log("Quiz submitted and results displayed in modal. Score:", score);
            }

            // Function to calculate grade from 1 to 7
            function calculateGrade(percentage) {
                if (percentage < 30) return 1.0;
                if (percentage < 40) return 2.0;
                if (percentage < 50) return 3.0;
                if (percentage < 60) return 4.0;
                if (percentage < 70) return 5.0;
                if (percentage < 85) return 6.0;
                return 7.0;
            }

            // Cambiar estos event listeners:
startExamBtn.addEventListener('click', generateQuestionsCategorized);
submitQuizBtn.addEventListener('click', submitCategorizedQuiz);

            // Close modal button listener
            closeModalBtn.addEventListener('click', () => {
                resultsModalOverlay.classList.remove('show');
                setTimeout(() => {
                    resultsModalOverlay.style.display = 'none';
                    resultsModalContent.classList.remove('pass', 'fail');
                    
                    // Reset exam
                    quizContainer.style.display = 'none';
                    startExamBtn.style.display = 'block';
                    submitQuizBtn.style.display = 'none';
                    examSection.classList.remove('active-red-border');
                    questions = [];
                    userAnswers = {};
                }, 300);
            });

            // Click outside modal to close
            resultsModalOverlay.addEventListener('click', (e) => {
                if (e.target === resultsModalOverlay) {
                    closeModalBtn.click();
                }
            });

            // --- Report Drafting Assistant Logic ---
            const incidentDescriptionInput = document.getElementById('incident-description-input');
            const reportTypeSelect = document.getElementById('report-type-select');
            const generateReportBtn = document.getElementById('generate-report-btn');
            const reportOutput = document.getElementById('report-output');
            const copyReportBtn = document.getElementById('copy-report-btn');
            const downloadActaBtn = document.getElementById('download-acta-btn');

            // Hide report action buttons on init
            copyReportBtn.style.display = 'none';
            downloadActaBtn.style.display = 'none';

            generateReportBtn.addEventListener('click', async () => {
                const description = incidentDescriptionInput.value.trim();
                const selectedReportType = reportTypeSelect.value;

                if (!description) {
                    reportOutput.innerHTML = '<p style="color: #dc3545;">Por favor, describe el incidente.</p>';
                    copyReportBtn.style.display = 'none';
                    downloadActaBtn.style.display = 'none';
                    return;
                }

                reportOutput.innerHTML = '<p style="color: #17a2b8;"><span class="spinner-border text-info" role="status"></span> Generando borrador...</p>';
                generateReportBtn.disabled = true;
                copyReportBtn.style.display = 'none';
                downloadActaBtn.style.display = 'none';

                if (selectedReportType === 'acta_detencion_particulares') {
                    // For Detention Act, show download button directly
                    reportOutput.innerHTML = `<p style="color: #28a745;">Haz clic en el botón para descargar el Acta de Detención:</p>`;
                    downloadActaBtn.style.display = 'block';
                    generateReportBtn.disabled = false;
                    console.log("Showing Detention Act download button.");
                    return;
                }

                // Generate a simulated report based on the type and description
                setTimeout(() => {
                    let generatedReport = '';
                    const currentDate = new Date().toLocaleDateString('es-CL');
                    const currentTime = new Date().toLocaleTimeString('es-CL', { hour: '2-digit', minute: '2-digit' });

                    switch (selectedReportType) {
                        case 'informe_interno':
                            generatedReport = `INFORME INTERNO DE INCIDENTE

Fecha: ${currentDate}
Hora: ${currentTime}
Ubicación del Incidente: ${extractLocation(description) || 'No especificado'}
Tipo de Incidente: ${classifyIncident(description)}

DESCRIPCIÓN DETALLADA DEL EVENTO:
${description}

PERSONAL DE SEGURIDAD INVOLUCRADO:
Guardia de Seguridad: [Nombre del guardia]
Cargo: Guardia de Seguridad
Acciones Iniciales: Observación del incidente y aplicación de protocolo establecido

ACCIONES TOMADAS:
- Se procedió según protocolo de seguridad establecido
- ${containsKeywords(description, ['carabineros', 'policía', 'autoridad']) ? 'Se notificó a Carabineros de Chile' : 'Se evaluó la necesidad de contactar autoridades'}
- Se documentó el incidente para registro interno

EVIDENCIA RECOLECTADA:
- Testimonio del guardia de seguridad
- ${containsKeywords(description, ['cámara', 'video', 'grabación']) ? 'Revisión de cámaras de seguridad' : 'No especificado'}

RECOMENDACIONES/OBSERVACIONES:
Se recomienda mantener los protocolos de seguridad vigentes y evaluar medidas preventivas adicionales si corresponde.

Firma del Guardia: ___________________
Fecha de elaboración: ${currentDate}`;
                            break;

                        case 'comunicacion_policial':
                            generatedReport = `COMUNICACIÓN A CARABINEROS DE CHILE

Fecha: ${currentDate}
Hora del Incidente: ${currentTime}
Lugar del Incidente: ${extractLocation(description) || 'No especificado'}
Tipo de Incidente: ${classifyIncident(description)}

DESCRIPCIÓN DEL EVENTO:
En la fecha y hora señalada, se registró el siguiente incidente: ${description}

ACCIONES INMEDIATAS TOMADAS:
- Observación y documentación del evento
- Aplicación de protocolo de seguridad establecido
- ${containsKeywords(description, ['detenido', 'retención', 'sospechoso']) ? 'Se procedió según normativa de detención por particulares' : 'Se mantuvo observación del área'}

Se pone en conocimiento de la autoridad policial para los fines que estime conveniente.

Atentamente,
[Nombre del Guardia de Seguridad]
[Empresa de Seguridad]`;
                            break;

                        case 'correo_supervisor':
                            generatedReport = `Asunto: Reporte de Incidente - ${currentDate}

Estimado Supervisor,

Por medio del presente, informo sobre el siguiente incidente ocurrido en mi turno:

Fecha y Hora: ${currentDate} - ${currentTime}
Resumen del Evento: ${description}

ACCIONES TOMADAS:
- Se aplicó el protocolo de seguridad correspondiente
- Se documentó el incidente según procedimiento
- ${containsKeywords(description, ['urgente', 'grave', 'inmediato']) ? 'Se considera necesaria supervisión adicional' : 'Situación bajo control'}

${containsKeywords(description, ['decisión', 'autorización', 'supervisor']) ? 'REQUIERE ACCIÓN DEL SUPERVISOR:\nSe solicita orientación para próximos pasos a seguir.' : 'SITUACIÓN CONTROLADA:\nNo se requiere acción inmediata adicional.'}

Quedo a disposición para cualquier aclaración adicional.

Saludos cordiales,
[Nombre del Guardia]`;
                            break;

                        case 'reporte_general':
                            generatedReport = `REPORTE GENERAL DE EVENTO

Fecha: ${currentDate}
Hora: ${currentTime}
Ubicación: ${extractLocation(description) || 'No especificado'}
Naturaleza del Evento: ${classifyIncident(description)}

DESCRIPCIÓN:
${description}

PERSONAS AFECTADAS/INVOLUCRADAS:
${containsKeywords(description, ['persona', 'cliente', 'empleado', 'visitante']) ? 'Personal y/o visitantes presentes en el área' : 'No especificado'}

MEDIDAS ADOPTADAS:
- Observación y registro del evento
- Aplicación de protocolos de seguridad vigentes
- Documentación para registro institucional

ESTADO ACTUAL:
Situación normalizada y bajo control.

Elaborado por: [Nombre del Guardia]
Fecha de elaboración: ${currentDate}`;
                            break;

                        default:
                            generatedReport = 'Error: Tipo de reporte no reconocido.';
                    }

                    reportOutput.innerHTML = `<pre style="white-space: pre-wrap; font-family: 'Poppins', sans-serif; background-color: #f8f9fa; padding: 10px; border-radius: 5px; color: #333; margin: 0;">${generatedReport}</pre>`;
                    copyReportBtn.style.display = 'block';
                    generateReportBtn.disabled = false;
                }, 1500);
            });

            copyReportBtn.addEventListener('click', () => {
                const reportContent = reportOutput.textContent;
                navigator.clipboard.writeText(reportContent).then(() => {
                    showSubtleMessage('¡Borrador copiado al portapapeles!');
                }).catch(err => {
                    console.error('Error al copiar el borrador:', err);
                    showSubtleMessage('No se pudo copiar el borrador.', true);
                });
            });

            // Helper functions for report generation
            function extractLocation(text) {
                const locationKeywords = ['tienda', 'oficina', 'entrada', 'estacionamiento', 'recepción', 'pasillo', 'sector', 'área'];
                for (let keyword of locationKeywords) {
                    if (text.toLowerCase().includes(keyword)) {
                        return keyword.charAt(0).toUpperCase() + keyword.slice(1);
                    }
                }
                return null;
            }

            function classifyIncident(text) {
                const lowerText = text.toLowerCase();
                if (lowerText.includes('hurto') || lowerText.includes('robo')) return 'Hurto/Robo';
                if (lowerText.includes('accidente')) return 'Accidente';
                if (lowerText.includes('sospechoso') || lowerText.includes('extraño')) return 'Actividad Sospechosa';
                if (lowerText.includes('emergencia')) return 'Emergencia';
                if (lowerText.includes('incendio') || lowerText.includes('fuego')) return 'Incendio';
                if (lowerText.includes('altercado') || lowerText.includes('pelea')) return 'Altercado';
                return 'Incidente General';
            }

            function containsKeywords(text, keywords) {
                const lowerText = text.toLowerCase();
                return keywords.some(keyword => lowerText.includes(keyword.toLowerCase()));
            }

            // Function to show subtle messages
            function showSubtleMessage(message, isError = false) {
                const messageBox = document.createElement('div');
                messageBox.className = 'subtle-response-box show';
                messageBox.textContent = message;
                messageBox.style.position = 'fixed';
                messageBox.style.top = '20%';
                messageBox.style.left = '50%';
                messageBox.style.transform = 'translate(-50%, -50%)';
                messageBox.style.zIndex = '1500';

                if (isError) {
                    messageBox.style.backgroundColor = 'rgba(220, 53, 69, 0.2)';
                    messageBox.style.color = '#dc3545';
                } else {
                    messageBox.style.backgroundColor = 'rgba(40, 53, 147, 0.2)';
                    messageBox.style.color = '#283593';
                }

                document.body.appendChild(messageBox);

                setTimeout(() => {
                    messageBox.classList.remove('show');
                    messageBox.addEventListener('transitionend', () => messageBox.remove());
                }, 3000);
            }

            // --- AI Clarifier Logic (Floating) ---
            const floatingAiButton = document.getElementById('floating-ai-button');
            const aiClarifierChat = document.getElementById('ai-clarifier-chat');
            const closeAiChatBtn = document.getElementById('close-ai-chat');
            const aiQuestionInput = document.getElementById('ai-question-input');
            const askAiBtn = document.getElementById('ask-ai-btn');
            const aiClarifierResponse = document.getElementById('ai-clarifier-response');

            floatingAiButton.addEventListener('click', () => {
                console.log("Floating AI button clicked. Toggling chat visibility.");
                aiClarifierChat.classList.toggle('show');
            });

            closeAiChatBtn.addEventListener('click', () => {
                console.log("Close chat button clicked. Hiding chat.");
                aiClarifierChat.classList.remove('show');
                aiQuestionInput.value = '';
                aiClarifierResponse.innerHTML = '<p>Tu respuesta aparecerá aquí.</p>';
            });

            askAiBtn.addEventListener('click', async function() {
                const userQuestion = aiQuestionInput.value.trim();
                if (userQuestion === "") {
                    aiClarifierResponse.innerHTML = '<p style="color: #dc3545;">Por favor, escribe tu pregunta.</p>';
                    return;
                }

                aiClarifierResponse.innerHTML = '<p style="color: #17a2b8;"><span class="spinner-border text-info" role="status"></span> Cargando respuesta de la IA... Esto puede tardar unos segundos.</p>';
                askAiBtn.disabled = true;
                console.log("Ask AI button clicked. Generating response for:", userQuestion);

                // Simulate AI response generation
                setTimeout(() => {
                    const response = generateAIResponse(userQuestion);
                    aiClarifierResponse.innerHTML = `<p>${response}</p>`;
                    askAiBtn.disabled = false;
                    console.log("AI Clarifier response generated and displayed.");
                }, 2000);
            });

            // Function to generate simulated AI responses
            function generateAIResponse(question) {
                const lowerQuestion = question.toLowerCase();
                
                // Respuestas sobre Decreto 93
                if (lowerQuestion.includes('decreto 93') && (lowerQuestion.includes('requisito') || lowerQuestion.includes('educación'))) {
                    return "Según el Decreto 93, para ser Guardia de Seguridad se requiere: tener al menos 18 años de edad, haber cursado educación media completa o su equivalente, no tener antecedentes penales, aprobar examen psicológico y físico, y completar el curso de formación de 90 horas académicas.";
                }
                
                if (lowerQuestion.includes('decreto 93') && (lowerQuestion.includes('uniforme') || lowerQuestion.includes('vestimenta'))) {
                    return "El Decreto 93 establece que el uniforme del guardia debe ser de color azul marino, con distintivos que identifiquen a la empresa y al guardia. Debe incluir placa identificatoria con nombre y RUN, y no puede asemejarse a uniformes de Fuerzas Armadas o de Orden.";
                }
                
                if (lowerQuestion.includes('decreto 93') && (lowerQuestion.includes('seguro') || lowerQuestion.includes('utM'))) {
                    return "El Decreto 93 establece que las empresas deben contratar un seguro de vida para sus guardias con una cifra asegurada de 75 UTM, que cubra accidentes y enfermedades derivadas del trabajo.";
                }
                
                // Respuestas sobre funciones del guardia
                if (lowerQuestion.includes('función') || lowerQuestion.includes('responsabilidad')) {
                    return "Las principales funciones del guardia de seguridad incluyen: vigilar y proteger bienes y personas, detectar y prevenir actos que atenten contra la seguridad, informar novedades a superiores, aplicar medidas de seguridad según protocolos, y colaborar con autoridades cuando sea requerido.";
                }
                
                if (lowerQuestion.includes('detención') || lowerQuestion.includes('detener')) {
                    return "Los guardias pueden detener a personas solo en caso de delito flagrante, aplicando el Artículo 134 del Código Procesal Penal. Deben entregar inmediatamente al detenido a Carabineros y no pueden usar fuerza excesiva.";
                }
                
                // Respuestas sobre Ley 21.659
                if (lowerQuestion.includes('ley 21.659') || lowerQuestion.includes('nueva ley')) {
                    return "La Ley 21.659 moderniza la regulación de seguridad privada en Chile. Entra en vigencia el 28 de noviembre de 2025 y establece nuevos estándares para empresas y guardias, fortalece la fiscalización y mejora los requisitos de formación.";
                }
                
                // Respuestas sobre armamento
                if (lowerQuestion.includes('arma') || lowerQuestion.includes('armamento')) {
                    return "Los guardias de seguridad NO están autorizados para portar armas de fuego según el Decreto 93. Solo pueden usar elementos de protección personal autorizados como bastón de goma, silbato y linterna.";
                }
                
                // Respuestas sobre procedimientos
                if (lowerQuestion.includes('procedimiento') || lowerQuestion.includes('protocolo')) {
                    return "Los guardias deben seguir protocolos establecidos: observar y reportar, no alterar sitio del suceso, preservar evidencias, comunicar novedades de inmediato, actuar con prudencia y solicitar apoyo cuando sea necesario.";
                }
                
                // Respuestas sobre formación
                if (lowerQuestion.includes('curso') || lowerQuestion.includes('formación') || lowerQuestion.includes('90 horas')) {
                    return "El curso OS-10 para guardias de seguridad tiene una duración de 90 horas académicas y debe incluir materias como: legislación, procedimientos de seguridad, primeros auxilios, comunicaciones, derechos humanos y ética profesional.";
                }
                
                // Respuesta general
                return "Basándome en la normativa chilena de seguridad privada (Decreto Ley 3607, Decreto 93 y Ley 21.659), puedo ayudarte con temas específicos sobre funciones del guardia, requisitos, procedimientos y marco legal. ¿Podrías ser más específico con tu consulta?";
            }

            console.log("Quiz system and AI Clarifier initialized successfully.");
        });
    </script>

</body>
</html>
